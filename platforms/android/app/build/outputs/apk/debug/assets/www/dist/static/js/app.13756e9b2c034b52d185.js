webpackJsonp([1],{"9GqY":function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("7+uW"),i=n("mvHQ"),s=n.n(i),a=n("//Fk"),o=n.n(a),c=n("Dd8w"),u=n.n(c),d=n("NYxO"),l=new(n("YwQ6").a)("conselho");l.version(1).stores({councils:"id",council_grades:"id",council_topics:"id",evaluations:"id",grades:"id",grade_subjects:"id",grade_observations:"id",permissions:"id",roles:"id",role_types:"id",role_type_permissions:"id",schools:"id",students:"id",student_observations:"id",student_grades:"id",subjects:"id",teachers:"id",teacher_requests:"id",topics:"id",topic_options:"id",users:"id"});var _=l,v=n("mtWM"),m=n.n(v),f=n("Pc6x"),p=n("fZjL"),h=n.n(p);function b(t){return h()(t).forEach(function(e){null!==t[e]&&void 0!==t[e]&&(t[e].toString()===parseInt(t[e]).toString()?t[e]=parseInt(t[e]):t[e].toString()===parseFloat(t[e]).toString()?t[e]=parseFloat(t[e]):t[e]===!!t[e]&&(t[e]=t[e]?1:0))}),t}function g(t){return t.map(function(t){return b(t)})}function C(t){return m.a.get("/"+t).then(function(e){var n=e.data,r=n.results,i=parseInt(n.max_results_per_page),s=parseInt(n.total_results),a=Math.floor(s/i);if(s===i||!a)return r;for(var c=[],u=1;u<=a;u++){var d={params:{page:u+1}},l=m.a.get("/"+t,d);c.push(l)}return o.a.all(c).then(function(t){return t.forEach(function(t){r=r.concat(t.data.results)}),g(r)})})}function y(t,e){return e=b(e),m.a.post("/"+t,e).then(function(t){return e.id=t.data.id,e.created_at=t.data.created_at,e.updated_at=t.data.created_at,b(e)})}function S(t,e,n){void 0===n&&(n=!0),e=b(e);var r="/"+t+(n?"/"+e.id:"");return m.a.patch(r,e).then(function(t){return e.updated_at=t.data.updated_at,b(e)})}var $=function(){return C("council_grades")},j=function(t){return y("council_grade",t)},w={namespaced:!0,state:{loaded:!1,council_grades:[]},getters:{getCouncilGrades:function(t){return t.council_grades}},mutations:{setAll:function(t,e){t.council_grades=e},create:function(t,e){t.council_grades.push(e)},setLoaded:function(t,e){void 0===e&&(e=!0),t.loaded=e},unload:function(t){t.loaded=!1,t.council_grades=[]}},actions:{getAllFromDb:function(t){return t.rootState.db.council_grades.toArray()},getAllFromAPI:function(){return $()},loadFromDb:function(t,e){if(e||!t.state.loaded)return t.commit("setLoaded",!1),t.dispatch("getAllFromDb").then(function(e){t.commit("setAll",e),t.commit("setLoaded")})},create:function(t,e){var n=t.rootState.db;return e.school_id=t.rootState.school_id,j(e).then(function(t){return n.council_grades.put(t).then(function(){return t})}).then(function(e){return t.commit("create",e),e})}}},x=function(){return C("councils")},E=function(t){return y("council",t)},A=function(t){return S("council",t)},T={namespaced:!0,state:{loaded:!1,councils:[]},getters:{getCouncils:function(t){return t.councils},getOrderedCouncils:function(t){return t.councils.sort(function(t,e){return t.start_date===e.start_date?0:t.start_date>e.start_date?-1:1})}},mutations:{setAll:function(t,e){t.councils=e},create:function(t,e){t.councils.push(e)},update:function(t,e){var n=t.councils.findIndex(function(t){return t.id===e.id});r.a.set(t.councils,n,e)},setLoaded:function(t,e){void 0===e&&(e=!0),t.loaded=e},unload:function(t){t.loaded=!1,t.councils=[]}},actions:{getAllFromDb:function(t){return t.rootState.db.councils.toArray()},getAllFromAPI:function(){return x()},loadFromDb:function(t,e){if(e||!t.state.loaded)return t.commit("setLoaded",!1),t.dispatch("getAllFromDb").then(function(e){t.commit("setAll",e),t.commit("setLoaded")})},create:function(t,e){var n=t.rootState.db;return e.school_id=t.rootState.school_id,E(e).then(function(t){return n.councils.put(t).then(function(){return t})}).then(function(e){return t.commit("create",e),e})},update:function(t,e){var n=t.rootState.db;return A(e).then(function(t){return n.councils.put(t).then(function(){return t})}).then(function(e){return t.commit("update",e),e})}}},q=function(){return C("council_topics")},k=function(t){return y("council_topic",t)},D={namespaced:!0,state:{council_topics:[],loaded:!1},getters:{getCouncilTopics:function(t){return t.council_topics}},mutations:{setAll:function(t,e){t.council_topics=e},create:function(t,e){t.council_topics.push(e)},setLoaded:function(t,e){void 0===e&&(e=!0),t.loaded=e},unload:function(t){t.loaded=!1,t.council_topics=[]}},actions:{getAllFromDb:function(t){return t.rootState.db.council_topics.toArray()},getAllFromAPI:function(){return q()},loadFromDb:function(t,e){if(e||!t.state.loaded)return t.commit("setLoaded",!1),t.dispatch("getAllFromDb").then(function(e){t.commit("setAll",e),t.commit("setLoaded")})},create:function(t,e){var n=t.rootState.db;return e.school_id=t.rootState.school_id,k(e).then(function(t){return n.council_topics.put(t).then(function(){return t})}).then(function(e){return t.commit("create",e),e})}}},G=function(){return C("evaluations")},R=function(t){return y("evaluation",t)},N=function(t){return S("evaluation",t)},F={namespaced:!0,state:{evaluations:[],loaded:!1},getters:{getEvaluations:function(t){return t.evaluations}},mutations:{setAll:function(t,e){t.evaluations=e},create:function(t,e){t.evaluations.push(e)},update:function(t,e){var n=t.evaluations.findIndex(function(t){return t.id===e.id});r.a.set(t.evaluations,n,e)},setMany:function(t,e){e.map(function(e){var n=t.evaluations.findIndex(function(t){return t.id===e.id});-1===n?t.evaluations.push(e):r.a.set(t.evaluations,n,e)})},setLoaded:function(t,e){void 0===e&&(e=!0),t.loaded=e},unload:function(t){t.loaded=!1,t.evaluations=[]}},actions:{getAllFromDb:function(t){return t.rootState.db.evaluations.toArray()},getAllFromAPI:function(){return G()},loadFromDb:function(t,e){if(e||!t.state.loaded)return t.commit("setLoaded",!1),t.dispatch("getAllFromDb").then(function(e){t.commit("setAll",e),t.commit("setLoaded")})},create:function(t,e){var n=t.rootState.db;return e.school_id=t.rootState.school_id,R(e).then(function(t){return n.evaluations.put(t).then(function(){return t})}).then(function(e){return t.commit("create",e),e})},update:function(t,e){var n=t.rootState.db;return N(e).then(function(t){return n.evaluations.put(t).then(function(){return t})}).then(function(e){return t.commit("update",e),e})},saveMany:function(t,e){var n=t.rootState.db,r=e.map(function(t){return t.id?N(t):R(t)});return o.a.all(r).then(function(t){return n.evaluations.bulkPut(t).then(function(){return t})}).then(function(e){t.commit("setMany",e)})}}},O=function(){return C("grade_observations")},P=function(t){return y("grade_observation",t)},U=function(t){return S("grade_observation",t)},L={namespaced:!0,state:{grade_observations:[],loaded:!1},getters:{getGradeObservations:function(t){return t.grade_observations}},mutations:{setAll:function(t,e){t.grade_observations=e},create:function(t,e){t.grade_observations.push(e)},update:function(t,e){var n=t.grade_observations.findIndex(function(t){return t.id===e.id});r.a.set(t.grade_observations,n,e)},setLoaded:function(t,e){void 0===e&&(e=!0),t.loaded=e},unload:function(t){t.loaded=!1,t.grade_observations=[]}},actions:{getAllFromDb:function(t){return t.rootState.db.grade_observations.toArray()},getAllFromAPI:function(){return O()},loadFromDb:function(t,e){if(e||!t.state.loaded)return t.commit("setLoaded",!1),t.dispatch("getAllFromDb").then(function(e){t.commit("setAll",e),t.commit("setLoaded")})},create:function(t,e){var n=t.rootState.db;return e.school_id=t.rootState.school_id,P(e).then(function(t){return n.grade_observations.put(t).then(function(){return t})}).then(function(e){return t.commit("create",e),e})},update:function(t,e){var n=t.rootState.db;return U(e).then(function(t){return n.grade_observations.put(t).then(function(){return t})}).then(function(e){return t.commit("update",e),e})}}},I=function(){return C("grades")},H=function(t){return y("grade",t)},z=function(t){return S("grade",t)},V={namespaced:!0,state:{grades:[],loaded:!1},getters:{getGrades:function(t){return t.grades},getOrderedGrades:function(t){return t.grades.sort(function(t,e){return t.name.localeCompare(e.name,"pt-BR",{ignorePunctuation:!0})})}},mutations:{setAll:function(t,e){t.grades=e},create:function(t,e){t.grades.push(e)},update:function(t,e){var n=t.grades.findIndex(function(t){return t.id===e.id});r.a.set(t.grades,n,e)},setLoaded:function(t,e){void 0===e&&(e=!0),t.loaded=e},unload:function(t){t.loaded=!1,t.grades=[]}},actions:{getAllFromDb:function(t){return t.rootState.db.grades.toArray()},getAllFromAPI:function(){return I()},loadFromDb:function(t,e){if(e||!t.state.loaded)return t.commit("setLoaded",!1),t.dispatch("getAllFromDb").then(function(e){t.commit("setAll",e),t.commit("setLoaded")})},create:function(t,e){var n=t.rootState.db;return e.school_id=t.rootState.school_id,H(e).then(function(t){return n.grades.put(t).then(function(){return t})}).then(function(e){return t.commit("create",e),e})},update:function(t,e){var n=t.rootState.db;return z(e).then(function(t){return n.grades.put(t).then(function(){return t})}).then(function(e){return t.commit("update",e),e})}}},M=function(){return C("grade_subjects")},B=function(t){return y("grade_subject",t)},W=function(t){return m.a.delete("/grade_subject/"+t)},J={namespaced:!0,state:{grade_subjects:[],loaded:!1},getters:{getGradeSubjects:function(t){return t.grade_subjects}},mutations:{setAll:function(t,e){t.grade_subjects=e},create:function(t,e){t.grade_subjects.push(e)},delete:function(t,e){var n=t.grade_subjects.findIndex(function(t){return t.id===e});r.a.delete(t.grade_subjects,n)},setLoaded:function(t,e){void 0===e&&(e=!0),t.loaded=e},unload:function(t){t.loaded=!1,t.grade_subjects=[]}},actions:{getAllFromDb:function(t){return t.rootState.db.grade_subjects.toArray()},getAllFromAPI:function(){return M()},loadFromDb:function(t,e){if(e||!t.state.loaded)return t.commit("setLoaded",!1),t.dispatch("getAllFromDb").then(function(e){t.commit("setAll",e),t.commit("setLoaded")})},create:function(t,e){var n=t.rootState.db;return e.school_id=t.rootState.school_id,B(e).then(function(t){return n.grade_subjects.put(t).then(function(){return t})}).then(function(e){return t.commit("create",e),e})},delete:function(t,e){var n=t.rootState.db;return W(e).then(function(){return n.grade_observations.delete(e)}).then(function(){t.commit("delete",e)})}}},Y=function(){return C("permissions")},X={namespaced:!0,state:{permissions:[],loaded:!1},getters:{getPermissions:function(t){return t.permissions},getOrderedPermissions:function(t){return t.permissions.sort(function(t,e){return t.name.localeCompare(e.name,"pt-BR",{ignorePunctuation:!0})})}},mutations:{setAll:function(t,e){t.permissions=e},setLoaded:function(t,e){void 0===e&&(e=!0),t.loaded=e},unload:function(t){t.loaded=!1,t.permissions=[]}},actions:{getAllFromDb:function(t){return t.rootState.db.permissions.toArray()},getAllFromAPI:function(){return Y()},loadFromDb:function(t,e){if(e||!t.state.loaded)return t.commit("setLoaded",!1),t.dispatch("getAllFromDb").then(function(e){t.commit("setAll",e),t.commit("setLoaded")})}}},Q=function(){return C("roles")},Z=function(t){return y("role",t)},K=function(t){return S("role",t)},tt={namespaced:!0,state:{roles:[],loaded:!1},getters:{getRoles:function(t){return t.roles}},mutations:{setAll:function(t,e){t.roles=e},create:function(t,e){t.roles.push(e)},update:function(t,e){var n=t.roles.findIndex(function(t){return t.id===e.id});r.a.set(t.roles,n,e)},setLoaded:function(t,e){void 0===e&&(e=!0),t.loaded=e},unload:function(t){t.loaded=!1,t.roles=[]}},actions:{getAllFromDb:function(t){return t.rootState.db.roles.toArray()},getAllFromAPI:function(){return Q()},loadFromDb:function(t,e){if(e||!t.state.loaded)return t.commit("setLoaded",!1),t.dispatch("getAllFromDb").then(function(e){t.commit("setAll",e),t.commit("setLoaded")})},create:function(t,e){var n=t.rootState.db;return e.school_id=t.rootState.school_id,Z(e).then(function(t){return n.roles.put(t).then(function(){return t})}).then(function(e){return t.commit("create",e),e})},update:function(t,e){var n=t.rootState.db;return K(e).then(function(t){return n.roles.put(t).then(function(){return t})}).then(function(e){return t.commit("update",e),e})}}},et=function(){return C("role_type_permissions")},nt={namespaced:!0,state:{role_type_permissions:[],loaded:!1},getters:{getRoleTypePermissions:function(t){return t.role_type_permissions}},mutations:{setAll:function(t,e){t.role_type_permissions=e},setLoaded:function(t,e){void 0===e&&(e=!0),t.loaded=e},unload:function(t){t.loaded=!1,t.role_type_permissions=[]}},actions:{getAllFromDb:function(t){return t.rootState.db.role_type_permissions.toArray()},getAllFromAPI:function(){return et()},loadFromDb:function(t,e){if(e||!t.state.loaded)return t.commit("setLoaded",!1),t.dispatch("getAllFromDb").then(function(e){t.commit("setAll",e),t.commit("setLoaded")})}}},rt=function(){return C("role_types")},it={namespaced:!0,state:{role_types:[],loaded:!1},getters:{getRoleTypes:function(t){return t.role_types},getOrderedRoleTypes:function(t){return t.role_types.sort(function(t,e){return t.name.localeCompare(e.name,"pt-BR",{ignorePunctuation:!0})})}},mutations:{setAll:function(t,e){t.role_types=e},setLoaded:function(t,e){void 0===e&&(e=!0),t.loaded=e},unload:function(t){t.loaded=!1,t.role_types=[]}},actions:{getAllFromDb:function(t){return t.rootState.db.role_types.toArray()},getAllFromAPI:function(){return rt()},loadFromDb:function(t,e){if(e||!t.state.loaded)return t.commit("setLoaded",!1),t.dispatch("getAllFromDb").then(function(e){t.commit("setAll",e),t.commit("setLoaded")})}}},st=function(){return C("schools")},at={namespaced:!0,state:{schools:[],loaded:!1},getters:{getSchools:function(t){return t.schools}},mutations:{setAll:function(t,e){t.schools=e},setLoaded:function(t,e){void 0===e&&(e=!0),t.loaded=e},unload:function(t){t.loaded=!1,t.schools=[]}},actions:{getAllFromDb:function(t){return t.rootState.db.schools.toArray()},getAllFromAPI:function(){return st()},loadFromDb:function(t,e){if(e||!t.state.loaded)return t.commit("setLoaded",!1),t.dispatch("getAllFromDb").then(function(e){t.commit("setAll",e),t.commit("setLoaded")})}}},ot=function(){return C("student_grades")},ct=function(t){return y("student_grade",t)},ut=function(t){return S("student_grade",t)},dt={namespaced:!0,state:{student_grades:[],loaded:!1},getters:{getStudentGrades:function(t){return t.student_grades}},mutations:{setAll:function(t,e){t.student_grades=e},create:function(t,e){t.student_grades.push(e)},update:function(t,e){var n=t.student_grades.findIndex(function(t){return t.id===e.id});r.a.set(t.student_grades,n,e)},setLoaded:function(t,e){void 0===e&&(e=!0),t.loaded=e},unload:function(t){t.loaded=!1,t.student_grades=[]}},actions:{getAllFromDb:function(t){return t.rootState.db.student_grades.toArray()},getAllFromAPI:function(){return ot()},loadFromDb:function(t,e){if(e||!t.state.loaded)return t.commit("setLoaded",!1),t.dispatch("getAllFromDb").then(function(e){t.commit("setAll",e),t.commit("setLoaded")})},create:function(t,e){var n=t.rootState.db;return e.school_id=t.rootState.school_id,ct(e).then(function(t){return n.student_grades.put(t).then(function(){return t})}).then(function(e){return t.commit("create",e),e})},update:function(t,e){var n=t.rootState.db;return ut(e).then(function(t){return n.student_grades.put(t).then(function(){return t})}).then(function(e){return t.commit("update",e),e})}}},lt=function(){return C("student_observations")},_t=function(t){return y("student_observation",t)},vt=function(t){return S("student_observation",t)},mt={namespaced:!0,state:{student_observations:[],loaded:!1},getters:{getStudentObservations:function(t){return t.student_observations}},mutations:{setAll:function(t,e){t.student_observations=e},create:function(t,e){t.student_observations.push(e)},update:function(t,e){var n=t.student_observations.findIndex(function(t){return t.id===e.id});r.a.set(t.student_observations,n,e)},setLoaded:function(t,e){void 0===e&&(e=!0),t.loaded=e},unload:function(t){t.loaded=!1,t.student_observations=[]}},actions:{getAllFromDb:function(t){return t.rootState.db.student_observations.toArray()},getAllFromAPI:function(){return lt()},loadFromDb:function(t,e){if(e||!t.state.loaded)return t.commit("setLoaded",!1),t.dispatch("getAllFromDb").then(function(e){t.commit("setAll",e),t.commit("setLoaded")})},create:function(t,e){var n=t.rootState.db;return e.school_id=t.rootState.school_id,_t(e).then(function(t){return n.student_observations.put(t).then(function(){return t})}).then(function(e){return t.commit("create",e),e})},update:function(t,e){var n=t.rootState.db;return vt(e).then(function(t){return n.student_observations.put(t).then(function(){return t})}).then(function(e){return t.commit("update",e),e})}}},ft=function(){return C("students")},pt=function(t){return y("student",t)},ht=function(t){return S("student",t)},bt={namespaced:!0,state:{students:[],loaded:!1},getters:{getStudents:function(t){return t.students}},mutations:{setAll:function(t,e){t.students=e},create:function(t,e){t.students.push(e)},update:function(t,e){var n=t.students.findIndex(function(t){return t.id===e.id});r.a.set(t.students,n,e)},setLoaded:function(t,e){void 0===e&&(e=!0),t.loaded=e},unload:function(t){t.loaded=!1,t.students=[]}},actions:{getAllFromDb:function(t){return t.rootState.db.students.toArray()},getAllFromAPI:function(){return ft()},loadFromDb:function(t,e){if(e||!t.state.loaded)return t.commit("setLoaded",!1),t.dispatch("getAllFromDb").then(function(e){t.commit("setAll",e),t.commit("setLoaded")})},create:function(t,e){var n=t.rootState.db;return e.school_id=t.rootState.school_id,pt(e).then(function(t){return n.students.put(t).then(function(){return t})}).then(function(e){return t.commit("create",e),e})},update:function(t,e){var n=t.rootState.db;return ht(e).then(function(t){return n.students.put(t).then(function(){return t})}).then(function(e){return t.commit("update",e),e})}}},gt=function(){return C("subjects")},Ct=function(t){return y("subject",t)},yt=function(t){return S("subject",t)},St={namespaced:!0,state:{subjects:[],loaded:!1},getters:{getSubjects:function(t){return t.subjects},getOrderedSubjects:function(t){return t.subjects.sort(function(t,e){return t.name.localeCompare(e.name,"pt-BR",{ignorePunctuation:!0})})}},mutations:{setAll:function(t,e){t.subjects=e},create:function(t,e){t.subjects.push(e)},update:function(t,e){var n=t.subjects.findIndex(function(t){return t.id===e.id});r.a.set(t.subjects,n,e)},setLoaded:function(t,e){void 0===e&&(e=!0),t.loaded=e},unload:function(t){t.loaded=!1,t.subjects=[]}},actions:{getAllFromDb:function(t){return t.rootState.db.subjects.toArray()},getAllFromAPI:function(){return gt()},loadFromDb:function(t,e){if(e||!t.state.loaded)return t.commit("setLoaded",!1),t.dispatch("getAllFromDb").then(function(e){t.commit("setAll",e),t.commit("setLoaded")})},create:function(t,e){var n=t.rootState.db;return e.school_id=t.rootState.school_id,Ct(e).then(function(t){return n.subjects.put(t).then(function(){return t})}).then(function(e){return t.commit("create",e),e})},update:function(t,e){var n=t.rootState.db;return yt(e).then(function(t){return n.subjects.put(t).then(function(){return t})}).then(function(e){return t.commit("update",e),e})}}},$t=function(){return C("teacher_requests")},jt=function(t){return y("teacher_request",t)},wt=function(t){return S("teacher_request",t)},xt=function(t){return m.a.delete("/teacher_request/"+t)},Et={namespaced:!0,state:{teacher_requests:[],loaded:!1},getters:{getTeacherRequests:function(t){return t.teacher_requests}},mutations:{setAll:function(t,e){t.teacher_requests=e},create:function(t,e){t.teacher_requests.push(e)},update:function(t,e){var n=t.teacher_requests.findIndex(function(t){return t.id===e.id});r.a.set(t.teacher_requests,n,e)},delete:function(t,e){var n=t.teacher_requests.findIndex(function(t){return t.id===e});r.a.delete(t.teacher_requests,n)},setLoaded:function(t,e){void 0===e&&(e=!0),t.loaded=e},unload:function(t){t.loaded=!1,t.teacher_requests=[]}},actions:{getAllFromDb:function(t){return t.rootState.db.teacher_requests.toArray()},getAllFromAPI:function(){return $t()},loadFromDb:function(t,e){if(e||!t.state.loaded)return t.commit("setLoaded",!1),t.dispatch("getAllFromDb").then(function(e){t.commit("setAll",e),t.commit("setLoaded")})},create:function(t,e){var n=t.rootState.db;return e.school_id=t.rootState.school_id,jt(e).then(function(t){return n.teacher_requests.put(t).then(function(){return t})}).then(function(e){return t.commit("create",e),e})},update:function(t,e){var n=t.rootState.db;return wt(e).then(function(t){return n.teacher_requests.put(t).then(function(){return t})}).then(function(e){return t.commit("update",e),e})},delete:function(t,e){var n=t.rootState.db;return xt(e).then(function(){return n.teacher_requests.delete(e)}).then(function(){t.commit("delete",e)})}}},At=function(){return C("teachers")},Tt=function(t){return y("teacher",t)},qt=function(t){return S("teacher",t)},kt=function(t){return m.a.delete("/teacher/"+t)},Dt={namespaced:!0,state:{loaded:!1,teachers:[]},getters:{getTeachers:function(t){return t.teachers}},mutations:{setAll:function(t,e){t.teachers=e},create:function(t,e){t.teachers.push(e)},update:function(t,e){var n=t.teachers.findIndex(function(t){return t.id===e.id});r.a.set(t.teachers,n,e)},delete:function(t,e){var n=t.teachers.findIndex(function(t){return t.id===e});r.a.delete(t.teachers,n)},setLoaded:function(t,e){void 0===e&&(e=!0),t.loaded=e},unload:function(t){t.loaded=!1,t.teachers=[]}},actions:{getAllFromDb:function(t){return t.rootState.db.teachers.toArray()},getAllFromAPI:function(){return At()},loadFromDb:function(t,e){if(e||!t.state.loaded)return t.commit("setLoaded",!1),t.dispatch("getAllFromDb").then(function(e){t.commit("setAll",e),t.commit("setLoaded")})},create:function(t,e){var n=t.rootState.db;return e.school_id=t.rootState.school_id,Tt(e).then(function(t){return n.teachers.put(t).then(function(){return t})}).then(function(e){return t.commit("create",e),e})},update:function(t,e){var n=t.rootState.db;return qt(e).then(function(t){return n.teachers.put(t).then(function(){return t})}).then(function(e){return t.commit("update",e),e})},delete:function(t,e){var n=t.rootState.db;return kt(e).then(function(){return n.teachers.delete(e)}).then(function(){t.commit("delete",e)})}}},Gt=n("2QDH"),Rt=n.n(Gt),Nt=function(){return C("topic_options")},Ft=function(t){return y("topic_option",t)},Ot=function(t){return S("topic_option",t)},Pt={namespaced:!0,state:{loaded:!1,topic_options:[]},getters:{getTopicOptions:function(t){return t.topic_options},getOrderedTopicOptions:function(t){return t.topic_options.sort(function(t,e){return Rt()(e.value-t.value)})}},mutations:{setAll:function(t,e){t.topic_options=e},create:function(t,e){t.topic_options.push(e)},update:function(t,e){var n=t.topic_options.findIndex(function(t){return t.id===e.id});r.a.set(t.topic_options,n,e)},setLoaded:function(t,e){void 0===e&&(e=!0),t.loaded=e},unload:function(t){t.loaded=!1,t.topic_options=[]}},actions:{getAllFromDb:function(t){return t.rootState.db.topic_options.toArray()},getAllFromAPI:function(){return Nt()},loadFromDb:function(t,e){if(e||!t.state.loaded)return t.commit("setLoaded",!1),t.dispatch("getAllFromDb").then(function(e){t.commit("setAll",e),t.commit("setLoaded")})},create:function(t,e){var n=t.rootState.db;return e.school_id=t.rootState.school_id,Ft(e).then(function(t){return n.topic_options.put(t).then(function(){return t})}).then(function(e){return t.commit("create",e),e})},update:function(t,e){var n=t.rootState.db;return Ot(e).then(function(t){return n.topic_options.put(t).then(function(){return t})}).then(function(e){return t.commit("update",e),e})}}},Ut=function(){return C("topics")},Lt=function(t){return y("topic",t)},It=function(t){return S("topic",t)},Ht={namespaced:!0,state:{topics:[],loaded:!1},getters:{getTopics:function(t){return t.topics},getOrderedTopics:function(t){return t.topics.sort(function(t,e){return t.name.localeCompare(e.name,"pt-BR",{ignorePunctuation:!0})})}},mutations:{setAll:function(t,e){t.topics=e},create:function(t,e){t.topics.push(e)},update:function(t,e){var n=t.topics.findIndex(function(t){return t.id===e.id});r.a.set(t.topics,n,e)},setLoaded:function(t,e){void 0===e&&(e=!0),t.loaded=e},unload:function(t){t.loaded=!1,t.topics=[]}},actions:{getAllFromDb:function(t){return t.rootState.db.topics.toArray()},getAllFromAPI:function(){return Ut()},loadFromDb:function(t,e){if(e||!t.state.loaded)return t.commit("setLoaded",!1),t.dispatch("getAllFromDb").then(function(e){t.commit("setAll",e),t.commit("setLoaded")})},create:function(t,e){var n=t.rootState.db;return e.school_id=t.rootState.school_id,Lt(e).then(function(t){return n.topics.put(t).then(function(){return t})}).then(function(e){return t.commit("create",e),e})},update:function(t,e){var n=t.rootState.db;return It(e).then(function(t){return n.topics.put(t).then(function(){return t})}).then(function(e){return t.commit("update",e),e})}}},zt=function(){return C("users")},Vt=function(t){return y("user",t)},Mt=function(t){return S("user",t,!1)},Bt={namespaced:!0,state:{users:[],loaded:!1},getters:{getUsers:function(t){return t.users},getOrderedUsers:function(t){return t.users.sort(function(t,e){return t.name.localeCompare(e.name,"pt-BR",{ignorePunctuation:!0})})}},mutations:{setAll:function(t,e){t.users=e},create:function(t,e){t.users.push(e)},update:function(t,e){var n=t.users.findIndex(function(t){return t.id===e.id});r.a.set(t.users,n,e)},setLoaded:function(t,e){void 0===e&&(e=!0),t.loaded=e},unload:function(t){t.loaded=!1,t.users=[]}},actions:{getAllFromDb:function(t){return t.rootState.db.users.toArray()},getAllFromAPI:function(){return zt()},loadFromDb:function(t,e){if(e||!t.state.loaded)return t.commit("setLoaded",!1),t.dispatch("getAllFromDb").then(function(e){t.commit("setAll",e),t.commit("setLoaded")})},create:function(t,e){var n=t.rootState.db;return e.school_id=t.rootState.school_id,Vt(e).then(function(t){return(e=u()({},e)).id=t.id,e.updated_at=t.created_at,e.updated_at=t.created_at,delete e.password,n.users.put(e).then(function(){return e})}).then(function(e){return t.commit("create",e),e})},update:function(t,e){var n=t.rootState.db;return Mt(e).then(function(t){return n.users.put(t).then(function(){return t})}).then(function(e){return t.commit("update",e),e})}}};r.a.use(d.a);var Wt=Object(f.a)(),Jt=new d.a.Store({modules:{council_grades:w,councils:T,council_topics:D,evaluations:F,grade_observations:L,grades:V,grade_subjects:J,permissions:X,roles:tt,role_type_permissions:nt,role_types:it,schools:at,student_grades:dt,student_observations:mt,students:bt,subjects:St,teacher_requests:Et,teachers:Dt,topic_options:Pt,topics:Ht,users:Bt},state:{school_id:1,db:_,token:{},logged_in:void 0,browser:u()({},Wt,{playStore:Wt.os.startsWith("Android"),iTunes:Wt.os.startsWith("Mac"),support:"chrome"===Wt.name&&Wt.versionNumber>=60||"firefox"===Wt.name&&Wt.versionNumber>=30||"edge"===Wt.name&&Wt.versionNumber>=14||"ie"===Wt.name&&Wt.version>=11||"opera"===Wt.name&&Wt.version>=43,readableName:function(){switch(Wt.name){case"chrome":return"Google Chrome";case"firefox":return"Firefox";case"edge":return"Edge";case"ie":return"Internet Explorer";case"opera":return"Ópera"}},updateLink:function(){if(Wt)switch(Wt.name){case"chrome":return Wt.playStore?"https://play.google.com/store/apps/details?id=com.android.chrome":Wt.iTunes?"https://itunes.apple.com/us/app/google-chrome/id535886823":"https://www.google.com/chrome";case"firefox":return Wt.playStore?"https://play.google.com/store/apps/details?id=org.mozilla.firefox":Wt.iTunes?"https://itunes.apple.com/ca/app/firefox-web-browser/id989804926":"https://www.mozilla.org/pt-BR/firefox/new";case"edge":return Wt.playStore?"https://play.google.com/store/apps/details?id=com.microsoft.emmx":Wt.iTunes?"https://itunes.apple.com/us/app/microsoft-edge/id1288723196?mt=8":"https://www.microsoft.com/en-us/download/details.aspx?id=48126#4baacbe7-a8a1-8091-5597-393c6b9ace67";case"ie":return"https://www.microsoft.com/en-us/download/details.aspx?id=48126#4baacbe7-a8a1-8091-5597-393c6b9ace67";case"opera":return Wt.playStore?"https://play.google.com/store/apps/details?id=com.opera.browser":"https://www.opera.com"}}})},mutations:{checkAuth:function(t){t.token=JSON.parse(localStorage.getItem("token")),t.logged_in=t.token&&new Date(t.token.expires_at)>new Date,t.logged_in?m.a.defaults.headers.common.Token=t.token.value:m.a.defaults.headers.common.Token=void 0}},actions:{loadData:function(t){var e=[];return t.state.db.tables.forEach(function(n){e.push(t.dispatch(n.name+"/loadFromDb"))}),o.a.all(e)},loadFromAPI:function(t){var e=t.state.db,n=["evaluations","student_observations","grade_observations"],r=[];return e.tables.forEach(function(e){if(-1===n.indexOf(e.name)){var i=e.name.slice(0,-1),s=t.dispatch("getResource",i).then(function(t){return e.clear().then(function(){return e.bulkPut(g(t))})});r.push(s)}}),o.a.all(r).then(function(){var e=[t.dispatch("roles/loadFromDb"),t.dispatch("role_types/loadFromDb"),t.dispatch("role_type_permissions/loadFromDb"),t.dispatch("permissions/loadFromDb")];return o.a.all(e)}).then(function(){var r=t.getters["roles/getRoles"].find(function(e){return e.user_id===t.state.token.user_id}),i=t.getters["role_types/getRoleTypes"].find(function(t){return t.id===r.role_type_id}),s=t.getters["role_type_permissions/getRoleTypePermissions"].filter(function(t){return t.role_type_id===i.id});if(!t.getters["permissions/getPermissions"].filter(function(t){return s.find(function(e){return e.permission_id===t.id})}).find(function(t){return"council_report"===t.reference})){var a=n.map(function(n){var r=n.slice(0,-1);return t.dispatch("getResource",r).then(function(t){return e[n].clear().then(function(){return e[n].bulkPut(g(t))})})});return o.a.all(a)}})},getResource:function(t,e){var n=e.name?e.name:e,r=e.data?e.data:{},i="/"+n;return r.school_id=1,m.a.get(i,{params:r}).then(function(t){var e=t.data,n=g(e.results),s=parseInt(e.max_results_per_page),a=parseInt(e.total_results),c=Math.floor(a/s);if(a===s||!c)return n;for(var u=[],d=1;d<=c;d++){r.page=d+1;var l=m.a.get(i,{params:r});u.push(l)}return o.a.all(u).then(function(t){return t.forEach(function(t){n=n.concat(t.data.results)}),n})})},login:function(t,e){var n={email:e.email,password:e.password};return m.a.post("/user_token",n).then(function(e){localStorage.setItem("token",s()(e.data)),t.commit("checkAuth")})},logout:function(t){localStorage.removeItem("token"),t.commit("checkAuth");var e=[];return t.state.db.tables.forEach(function(n){var r=n.clear().then(function(){t.commit(n.name+"/unload")});e.push(r)}),o.a.all(e)}}}),Yt=n("/ocq"),Xt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"row"},[t.$store.state.browser.support?[t._m(0)]:[t._m(1),t._v(" "),n("div",{staticClass:"col-12"},[n("div",{staticClass:"row justify-content-center"},[n("div",{staticClass:"col-md-9"},[n("article",{staticClass:"box"},[t.$store.state.browser.readableName()?n("header",{staticClass:"box-header"},[t._v("\n                Seu "),n("b",[t._v(t._s(t.$store.state.browser.readableName()))]),t._v(" está desatualizado.\n              ")]):t._e(),t._v(" "),n("div",{staticClass:"box-body text-center"},[t.$store.state.browser.readableName()?[n("br"),n("br"),t._v(" "),n("p",{staticClass:"h5"},[t._v("Para que o aplicativo funcione corretamente, atualize seu navegador.")]),t._v(" "),n("br"),t._v(" "),n("p",[n("a",{staticClass:"btn-info btn-lg",attrs:{href:t.$store.state.browser.updateLink(),target:"_blank"}},[t._v("Baixar "+t._s(t.$store.state.browser.readableName())+" atualizado")])]),t._v(" "),n("br"),n("br")]:[n("p",[t._v("Para que o aplicativo funcione corretamente, utilize um navegador suportado:")]),t._v(" "),t._m(2)]],2)])])])])]],2)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"col-auto"},[e("h1",{staticClass:"content-title"},[e("i",{staticClass:"material-icons"},[this._v("home")]),this._v(" Página Inicial")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"col-auto"},[e("h1",{staticClass:"content-title"},[e("i",{staticClass:"material-icons"},[this._v("warning")]),this._v(" Navegador Não Suportado")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[e("a",{attrs:{href:"https://www.google.com/chrome",target:"_blank"}},[this._v("Google Chrome")])]),this._v(" "),e("li",[e("a",{attrs:{href:"https://www.mozilla.org/pt-BR/firefox/new",target:"_blank"}},[this._v("Mozilla Firefox")])])])}]},Qt=n("VU/8")({name:"Index"},Xt,!1,null,null,null).exports,Zt={name:"Login",methods:{login:function(t){var e=this;this.$emit("loading");var n=t.target,r={email:n.querySelector("[name=email]").value,password:n.querySelector("[name=password]").value};return this.$store.dispatch("login",r).then(function(){return e.$store.dispatch("loadFromAPI")}).then(function(){return e.$store.dispatch("loadData")}).then(function(){return e.load()}).then(function(){e.$emit("loaded"),e.$router.push("/")}).catch(function(t){e.$emit("loaded"),e.$emit("notify","Erro","Não foi possível fazer login. Tente novamente!","danger"),console.log("Error:",t)})},load:function(){var t=this,e=["teacher_requests","users","councils","roles","role_types","role_type_permissions","permissions"].map(function(e){return t.$store.dispatch(e+"/loadFromDb",!0)});return o.a.all(e)}}},Kt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._m(0),t._v(" "),n("div",{staticClass:"row justify-content-center"},[n("div",{staticClass:"col-12 col-sm-10 col-md-8 col-lg-7 col-xlg-6"},[n("article",{staticClass:"box"},[n("div",{staticClass:"box-body"},[n("form",{attrs:{action:"#",method:"POST"},on:{submit:function(e){return e.preventDefault(),t.login(e)}}},[n("br"),t._v(" "),t._m(1),n("br")])])])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"row"},[e("div",{staticClass:"col-auto"},[e("h1",{staticClass:"content-title"},[e("i",{staticClass:"material-icons"},[this._v("lock")]),this._v("Login")])])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"row justify-content-center"},[n("div",{staticClass:"col-11"},[n("div",{staticClass:"input"},[n("input",{attrs:{name:"email",required:"",type:"email",id:"email"}}),t._v(" "),n("label",{attrs:{for:"email"}},[n("span",{staticClass:"material-icons"},[t._v("email")]),t._v(" E-mail\n                  ")])]),t._v(" "),n("div",{staticClass:"input"},[n("input",{attrs:{name:"password",required:"",type:"password",id:"password"}}),t._v(" "),n("label",{attrs:{for:"password"}},[n("span",{staticClass:"material-icons"},[t._v("vpn_key")]),t._v(" Senha\n                  ")])]),t._v(" "),n("div",{staticClass:"text-right"},[n("button",{staticClass:"btn-success btn-lg",attrs:{type:"submit"}},[n("span",{staticClass:"material-icons"},[t._v("check")]),t._v(" Entrar\n                  ")])])])])}]},te=n("VU/8")(Zt,Kt,!1,null,null,null).exports,ee={name:"TeacherRequest",data:function(){return{current_user_id:void 0,current_grade_id:"",current_subject_id:""}},computed:{orderedGrades:function(){return this.$store.getters["grades/getOrderedGrades"]},currentGradeSubjects:function(){var t=this;return this.current_grade_id?this.$store.getters["grade_subjects/getGradeSubjects"].filter(function(e){return e.grade_id===t.current_grade_id}):[]},currentSubjects:function(){var t=this;return this.current_grade_id?this.$store.getters["subjects/getOrderedSubjects"].filter(function(e){return t.currentGradeSubjects.find(function(t){return t.subject_id===e.id})}):[]},currentTeachers:function(){var t=this;return this.current_grade_id?this.$store.getters["teachers/getTeachers"].filter(function(e){return e.grade_id===t.current_grade_id}):[]},currentTeacherRequests:function(){var t=this;return this.$store.getters["teacher_requests/getTeacherRequests"].filter(function(e){return e.user_id===t.current_user_id})},currentGradeTeacherRequests:function(){var t=this;return this.current_grade_id?this.currentTeacherRequests.filter(function(e){return e.grade_id===t.current_grade_id}):[]},currentUserTeachers:function(){var t=this;return this.$store.getters["teachers/getTeachers"].filter(function(e){return e.user_id===t.current_user_id})}},methods:{setCurrentTeacherRequest:function(t){this.current_teacher_request_id=t},getGrade:function(t){return this.$store.getters["grades/getGrades"].find(function(e){return e.id===t})},getSubject:function(t){return this.$store.getters["subjects/getSubjects"].find(function(e){return e.id===t})},teacherRequestSave:function(){var t=this;this.$emit("loading");var e={grade_id:this.current_grade_id,subject_id:this.current_subject_id,user_id:this.current_user_id};this.$store.dispatch("teacher_requests/create",e).then(function(){t.$emit("notify","Sucesso!","Requisição criada com sucesso!","success"),t.current_subject_id=""}).catch(function(e){t.$emit("notify","Erro!","Não foi possível criar a requisição.","danger"),console.log("Error:",e)}).finally(function(){t.$emit("loaded")})},teacherRequestDelete:function(){var t=this;this.$emit("loading"),this.$store.dispatch("teacher_requests/delete",this.current_teacher_request_id).then(function(){t.$emit("notify","Sucesso!","Requisição excluída com sucesso.","success")}).finally(function(){return t.$emit("loaded")})},load:function(){var t=this,e=["grades","grade_subjects","subjects","teachers","teacher_requests"].map(function(e){return t.$store.dispatch(e+"/loadFromDb")});return o.a.all(e)}},beforeCreate:function(){this.$emit("loading")},created:function(){var t=this;this.current_user_id=this.$store.state.token.user_id,this.current_grade_id="",this.current_subject_id="",this.load().then(function(){t.$emit("loaded")})}},ne={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._m(0),t._v(" "),n("article",{staticClass:"box"},[n("div",{staticClass:"box-body"},[n("br"),t._v(" "),n("form",{attrs:{action:"#","data-success":"Aguardando a aprovação do supervisor!","data-error":"Não foi possível cadastrar"},on:{submit:function(e){return e.preventDefault(),t.teacherRequestSave(e)}}},[n("div",{staticClass:"row justify-content-center"},[n("div",{staticClass:"col-12 col-md-9"},[n("div",{staticClass:"row justify-content-center"},[n("div",{staticClass:"input col-6 col-sm-4"},[n("select",{directives:[{name:"model",rawName:"v-model",value:t.current_grade_id,expression:"current_grade_id"}],attrs:{id:"current_grade_id",name:"grade_id",required:""},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.current_grade_id=e.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"",selected:"",hidden:"",disabled:""}},[t._v("Selecione...")]),t._v(" "),t._l(t.orderedGrades,function(e){return n("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.name))])})],2),t._v(" "),n("label",{attrs:{for:"current_grade_id"}},[t._v("Turma")])]),t._v(" "),n("div",{staticClass:"input col-6 col-sm-4"},[n("select",{directives:[{name:"model",rawName:"v-model",value:t.current_subject_id,expression:"current_subject_id"}],attrs:{id:"current_subject_id",name:"subject_id",required:"",disabled:!t.current_grade_id},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.current_subject_id=e.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"",selected:"",hidden:"",disabled:""}},[t._v(t._s(t.current_grade_id?"Selecione...":"Selecione a turma..."))]),t._v(" "),t._l(t.currentSubjects,function(e){return n("option",{key:e.id,attrs:{disabled:t.currentTeachers.find(function(t){return t.subject_id===e.id})||t.currentGradeTeacherRequests.find(function(t){return t.subject_id===e.id})},domProps:{value:e.id}},[t._v(t._s(e.name))])})],2),t._v(" "),n("label",{attrs:{for:"current_subject_id"}},[t._v("Disciplina")])]),t._v(" "),t._m(1)])])])]),n("br"),t._v(" "),t.currentUserTeachers.length||t.currentTeacherRequests.length?n("table",{staticClass:"table"},[t._m(2),t._v(" "),n("tbody",[t._l(t.currentTeacherRequests,function(e){return n("tr",{key:"teacher_request-"+e.id},[n("td",[t._v(t._s(t.getGrade(e.grade_id).name))]),t._v(" "),n("td",[t._v(t._s(t.getSubject(e.subject_id).name))]),t._v(" "),n("td",{staticClass:"text-muted"},[t._v("Aguardando aprovação")]),t._v(" "),n("td",{staticClass:"text-right no-wrap"},[n("a",{staticClass:"btn-danger btn-sm tooltip tooltip-end",attrs:{href:"#modal-delete-teacher_request",title:"Remover"},on:{click:function(n){t.setCurrentTeacherRequest(e.id)}}},[n("div",{staticClass:"material-icons"},[t._v("delete")]),t._v(" "),n("span",{staticClass:"d-none d-md-inline"},[t._v("Remover")])])])])}),t._v(" "),t._l(t.currentUserTeachers,function(e){return n("tr",{key:"teacher-"+e.id},[n("td",[t._v(t._s(t.getGrade(e.grade_id).name))]),t._v(" "),n("td",[t._v(t._s(t.getSubject(e.subject_id).name))]),t._v(" "),n("td"),t._v(" "),t._m(3,!0)])})],2)]):n("div",{staticClass:"text-center text-muted"},[n("br"),t._v(" "),n("div",{staticClass:"h4"},[t._v("Você ainda não está vinculado à nenhuma turma.")]),t._v(" "),t._m(4),n("br")])])]),t._v(" "),n("prompt",{attrs:{title:"Fale com o supervisor",type:"danger",anchor:"modal-delete-teacher"}},[n("p",[t._v("Você não pode se desvincular desta turma, pois já recebeu a aprovação do supervisor.")]),t._v(" "),n("p",[t._v("Caso seja realmente necessário, solicite ao supervisor que te desvincule.")])]),t._v(" "),n("prompt",{attrs:{title:"Remover solicitação",type:"danger",anchor:"modal-delete-teacher_request",accept:"Remover"},on:{accept:t.teacherRequestDelete,close:function(e){t.setCurrentTeacherRequest(void 0)}}},[n("p",[t._v("Tem certeza que deseja remover esta solicitação?")])])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("h1",{staticClass:"content-title"},[e("i",{staticClass:"material-icons"},[this._v("people")]),this._v("Turmas")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"col-12 col-sm-3"},[e("br",{staticClass:"d-none d-sm-inline"}),this._v(" "),e("button",{staticClass:"btn-success",attrs:{type:"submit"}},[e("span",{staticClass:"material-icons"},[this._v("check")]),this._v(" Salvar\n                ")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("th",[this._v("Turma")]),this._v(" "),e("th",[this._v("Disciplina")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("td",{staticClass:"text-right no-wrap"},[e("a",{staticClass:"btn-danger btn-sm tooltip tooltip-end",attrs:{href:"#modal-delete-teacher",title:"Remover"}},[e("div",{staticClass:"material-icons"},[this._v("delete")]),this._v(" "),e("span",{staticClass:"d-none d-md-inline"},[this._v("Remover")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Selecione uma turma e uma disciplina e clique em "),e("b",[this._v("salvar")]),this._v(" para poder avaliar.")])}]},re=n("VU/8")(ee,ne,!1,null,null,null).exports,ie={name:"Subject",data:function(){return{current_subject_id:void 0}},computed:{orderedSubjects:function(){return this.$store.getters["subjects/getOrderedSubjects"]},currentSubject:function(){var t=this;return this.current_subject_id?this.orderedSubjects.find(function(e){return e.id===t.current_subject_id}):{}}},methods:{setCurrentSubject:function(t){this.current_subject_id=t},subjectSave:function(t){var e=this;this.$emit("loading");var n=t.target,r={name:n.querySelector("[name=name]").value,active:!0};return this.$store.dispatch("subjects/create",r).then(function(){n.querySelector("[name=name]").value="",e.$emit("notify","Sucesso!","Disciplina criada com sucesso!","success")}).catch(function(t){e.$emit("notify","Erro!","Não foi possível criar a disciplina.","danger"),console.log("Error:",t.stack)}).finally(function(){e.$emit("loaded")})},subjectUpdate:function(t){var e=this;this.$emit("loading");var n=t.target,r={id:this.current_subject_id,name:n.querySelector("[name=name]").value,active:!!n.querySelector("[name=active]").checked};return this.$store.dispatch("subjects/update",r).then(function(){e.$emit("notify","Sucesso!","Disciplina editada com sucesso!","success"),e.$refs.modalEdit.close()}).catch(function(t){e.$emit("notify","Erro!","Não foi possível editar a disciplina.","danger"),console.log("Error:",t)}).finally(function(){e.$emit("loaded")})},load:function(){var t=this,e=["subjects"].map(function(e){return t.$store.dispatch(e+"/loadFromDb")});return o.a.all(e)}},beforeCreate:function(){this.$emit("loading")},created:function(){var t=this;this.load().then(function(){t.$emit("loaded")})}},se={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._m(0),t._v(" "),n("article",{staticClass:"box"},[n("div",{staticClass:"box-body"},[t.orderedSubjects.length?n("table",{staticClass:"table"},[t._m(1),t._v(" "),n("tbody",t._l(t.orderedSubjects,function(e){return n("tr",{key:e.id},[n("td",{class:parseInt(e.active)?"":"text-muted"},[t._v("\n              "+t._s(e.name)+" "),parseInt(e.active)?t._e():n("span",{staticClass:"text-muted"},[t._v("(invisível)")])]),t._v(" "),n("td",{staticClass:"text-right no-wrap"},[n("a",{staticClass:"btn-warning btn-sm tooltip tooltip-end",attrs:{href:"#modal-edit",title:"Editar disciplina"},on:{click:function(n){t.setCurrentSubject(e.id)}}},[n("div",{staticClass:"material-icons"},[t._v("edit")]),t._v(" "),n("span",{staticClass:"d-none d-md-inline"},[t._v("Editar")])])])])}))]):n("div",{staticClass:"text-center text-muted"},[n("br"),t._v(" "),n("div",{staticClass:"h4"},[t._v("Ainda não há nenhuma disciplina cadastrada")]),n("br")])])]),t._v(" "),n("modal",{ref:"modalNew",attrs:{anchor:"modal-new",title:"Nova disciplina"}},[n("div",{staticClass:"row justify-content-center"},[n("div",{staticClass:"col-sm-11"},[n("form",{attrs:{action:"#","data-success":"Disciplina cadastrada com sucesso","data-error":"Não foi possível cadastrar a disciplina"},on:{submit:function(e){return e.preventDefault(),t.subjectSave(e)}}},[n("input",{attrs:{type:"hidden",name:"active",value:"1"}}),n("br"),t._v(" "),n("div",{staticClass:"input"},[n("input",{attrs:{required:"",name:"name",placeholder:"Ex.: Matemática"}}),t._v(" "),n("label",[t._v("Nome")])]),t._v(" "),n("br"),t._v(" "),n("a",{staticClass:"btn-danger",attrs:{href:"#"}},[n("div",{staticClass:"material-icons"},[t._v("close")]),t._v(" Cancelar\n          ")]),t._v(" "),n("button",{staticClass:"btn-success pull-right",attrs:{type:"submit"}},[n("span",{staticClass:"material-icons"},[t._v("check")]),t._v("  Salvar\n          ")]),t._v(" "),n("br")])])])]),t._v(" "),n("modal",{ref:"modalEdit",attrs:{anchor:"modal-edit",title:"Editar disciplina"},on:{close:function(e){t.setCurrentSubject(void 0)}}},[n("div",{staticClass:"row justify-content-center"},[n("div",{staticClass:"col-sm-11"},[n("form",{attrs:{action:"#","data-success":"Disciplina editada com sucesso","data-error":"Não foi possível editar a disciplina"},on:{submit:function(e){return e.preventDefault(),t.subjectUpdate(e)}}},[n("br"),t._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"input col-12 col-sm-8"},[n("input",{attrs:{required:"",name:"name",placeholder:"Ex.: Matemática",minlength:"3"},domProps:{value:t.currentSubject.name}}),t._v(" "),n("label",[t._v("Nome")])]),t._v(" "),n("div",{staticClass:"col-12 col-sm-4"},[n("label",[n("br"),t._v(" "),n("input",{attrs:{name:"active",type:"checkbox"},domProps:{value:1,checked:parseInt(t.currentSubject.active)}}),t._v("Visível\n              ")])])]),t._v(" "),n("br"),t._v(" "),n("a",{staticClass:"btn-danger",attrs:{href:"#"}},[n("div",{staticClass:"material-icons"},[t._v("close")]),t._v(" Cancelar\n          ")]),t._v(" "),n("button",{staticClass:"btn-success pull-right",attrs:{type:"submit"}},[n("span",{staticClass:"material-icons"},[t._v("check")]),t._v("  Salvar\n          ")]),n("br")])])])])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"row"},[e("div",{staticClass:"col-auto"},[e("h1",{staticClass:"content-title"},[e("i",{staticClass:"material-icons"},[this._v("book")]),this._v("Disciplinas")])]),this._v(" "),e("div",{staticClass:"col text-right"},[e("a",{staticClass:"btn-success btn-sm no-wrap",attrs:{href:"#modal-new"}},[e("div",{staticClass:"material-icons"},[this._v("add")]),this._v(" Criar nova disciplina")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("th",[this._v("Nome")])])])}]},ae=n("VU/8")(ie,se,!1,null,null,null).exports,oe={name:"Topic",data:function(){return{current_topic_id:void 0,new_topic_options:[{},{}],editing_topic_options:[]}},computed:{orderedTopics:function(){return this.$store.getters["topics/getOrderedTopics"]},orderedTopicOptions:function(){return this.$store.getters["topic_options/getOrderedTopicOptions"]},currentTopic:function(){var t=this;return this.current_topic_id&&this.orderedTopics.find(function(e){return e.id===t.current_topic_id})||{}},currentTopicOptions:function(){var t=this;return this.current_topic_id?this.orderedTopicOptions.filter(function(e){return e.topic_id===t.current_topic_id}):[]}},watch:{current_topic_id:function(){this.current_topic_id?this.editing_topic_options=JSON.parse(s()(this.currentTopicOptions)):this.editing_topic_options=[]}},methods:{setCurrentTopic:function(t){this.current_topic_id=t,this.new_topic_options=t?[]:[{},{}]},removeNewTopicOption:function(t){this.$delete(this.new_topic_options,t)},removeEditingTopicOption:function(t){this.$delete(this.editing_topic_options,t)},topicSave:function(t){var e=this;this.$emit("loading");var n=t.target,r={name:n.querySelector("[name=name]").value,active:!0,topic_option_id:null},i=n.querySelectorAll('[name="topic_option_name[]"]'),s=[].map.call(i,function(t){return t.value}),a=n.querySelectorAll('[name="topic_option_value[]"]'),c=[].map.call(a,function(t){return t.value}),u=n.querySelectorAll('[name="option_default"]'),d=[].map.call(u,function(t){return t.checked}).indexOf(!0),l=[];return s.forEach(function(t,e){l.push({name:t,value:c[e],active:!0})}),this.$store.dispatch("topics/create",r).then(function(t){r.id=t.id;var n=[];return l.forEach(function(r){r.topic_id=t.id;var i=e.$store.dispatch("topic_options/create",r);n.push(i)}),o.a.all(n)}).then(function(t){if(-1!==d)return r.topic_option_id=t[d].id,e.$store.dispatch("topics/update",r)}).then(function(){e.$emit("notify","Sucesso!","Tópico criado com sucesso!","success"),n.querySelector("[name=name]").value="",e.new_topic_options=[{},{}]}).catch(function(t){e.$emit("notify","Erro!","Não foi possível criar o tópico.","danger"),console.log("Error:",t)}).finally(function(){e.$emit("loaded")})},topicUpdate:function(t){var e=this;this.$emit("loading");var n=t.target,r={id:this.current_topic_id,name:n.querySelector("[name=name]").value,active:n.querySelector("[name=active]").checked,topic_option_id:this.currentTopic.topic_option_id};return this.$store.dispatch("topics/update",r).then(function(){e.$emit("notify","Sucesso!","Tópico editado com sucesso!","success"),e.$refs.modalEdit.close()}).catch(function(t){e.$emit("notify","Erro!","Não foi possível editar o tópico.","danger"),console.log("Error:",t)}).finally(function(){e.$emit("loaded")})},topicOptionsUpdate:function(){var t=this;this.$emit("loading");var e=[];return this.editing_topic_options.forEach(function(n){var r=n.id?"topic_options/update":"topic_options/create",i=t.$store.dispatch(r,n);e.push(i)}),o.a.all(e).then(function(){t.$emit("notify","Sucesso!","Opção de Resposta editada com sucesso!","success"),t.editing_topic_options=JSON.parse(s()(t.currentTopicOptions))}).catch(function(e){t.$emit("notify","Erro!","Não foi possível editar a Opção de Resposta.","danger"),console.log("Error:",e)}).finally(function(){t.$emit("loaded")})},updateDefaultOption:function(t){var e=this;this.$emit("loading");var n={id:this.current_topic_id,name:this.currentTopic.name,active:this.currentTopic.active,topic_option_id:t};return this.$store.dispatch("topics/update",n).then(function(){e.$emit("notify","Sucesso!","Opção de Resposta Padrão editada com sucesso!","success")}).catch(function(t){e.$emit("notify","Erro!","Não foi possível editar a Opção de Resposta Padrão.","danger"),console.log("Error:",t)}).finally(function(){e.$emit("loaded")})},newTopicOption:function(){var t={topic_id:this.current_topic_id,active:!0};this.current_topic_id?this.editing_topic_options.push(t):this.new_topic_options.push(t),this.$nextTick(function(){var t=document.querySelectorAll('input[name="topic_option_name[]"]');t.length&&t[t.length-1].focus()})},load:function(){var t=this,e=["topics","topic_options"].map(function(e){return t.$store.dispatch(e+"/loadFromDb")});return o.a.all(e)}},beforeCreate:function(){this.$emit("loading")},created:function(){var t=this;this.current_topic_id=void 0,this.new_topic_options=[{},{}],this.editing_topic_options=[],this.load().then(function(){t.$emit("loaded")})}},ce={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._m(0),t._v(" "),n("article",{staticClass:"box"},[n("div",{staticClass:"box-body"},[t.orderedTopics.length?n("table",{staticClass:"table"},[t._m(1),t._v(" "),n("tbody",t._l(t.orderedTopics,function(e){return n("tr",{key:e.id},[n("td",{class:parseInt(e.active)?"":"text-muted"},[t._v("\n            "+t._s(e.name)+"\n            "),parseInt(e.active)?t._e():n("span",{staticClass:"text-muted"},[t._v("(invisível)")])]),t._v(" "),n("td",{staticClass:"text-right no-wrap"},[n("a",{staticClass:"btn-warning btn-sm tooltip tooltip-end",attrs:{href:"#modal-edit",title:"Editar tópico"},on:{click:function(n){t.setCurrentTopic(e.id)}}},[n("div",{staticClass:"material-icons"},[t._v("edit")]),t._v(" "),n("span",{staticClass:"d-none d-md-inline"},[t._v("Editar")])]),t._v(" "),n("a",{staticClass:"btn-primary btn-sm tooltip tooltip-end",attrs:{href:"#modal-topic_options",title:"Opções de resposta"},on:{click:function(n){t.setCurrentTopic(e.id)}}},[n("div",{staticClass:"material-icons"},[t._v("list")]),t._v(" "),n("span",{staticClass:"d-none d-md-inline"},[t._v("Opções")])])])])}))]):n("div",{staticClass:"text-center text-muted"},[n("br"),t._v(" "),n("div",{staticClass:"h4"},[t._v("Ainda não há nenhum tópico cadastrado")]),n("br")])])]),t._v(" "),n("modal",{ref:"modalNew",attrs:{anchor:"modal-new",title:"Criar novo tópico"}},[n("div",{staticClass:"row justify-content-center"},[n("div",{staticClass:"col-sm-11"},[n("form",{attrs:{action:"#","data-success":"Tópico cadastrado com sucesso","data-error":"Não foi possível cadastrar o tópico"},on:{submit:function(e){return e.preventDefault(),t.topicSave(e)}}},[n("br"),t._v(" "),n("div",{staticClass:"input"},[n("input",{attrs:{required:"",placeholder:"Ex.: Tarefas de casa",name:"name",minlength:"3"}}),t._v(" "),n("label",[t._v("Nome")])]),t._v(" "),n("hr"),t._v(" "),n("div",{staticClass:"h4"},[t._v("Opções de resposta")]),t._v(" "),n("table",{staticClass:"table"},[n("thead",[n("tr",[n("th",[t._v("Nome")]),t._v(" "),n("th",{staticClass:"no-wrap"},[t._v("Valor (0-100)")]),t._v(" "),n("th",{staticClass:"text-center"},[t._v("Padrão")])])]),t._v(" "),n("tbody",t._l(t.new_topic_options,function(e,r){return n("tr",{key:"new-topic-option"+r},[n("td",[n("div",{staticClass:"input"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"topic_option.name"}],staticStyle:{margin:"0px"},attrs:{required:"",placeholder:"Ex.: Excelente",name:"topic_option_name[]",minlength:"3"},domProps:{value:e.name},on:{input:function(n){n.target.composing||t.$set(e,"name",n.target.value)}}})])]),t._v(" "),n("td",[n("div",{staticClass:"input"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"topic_option.value"}],staticStyle:{margin:"0px"},attrs:{required:"",type:"number",min:"0",max:"100",placeholder:"0 - 100",name:"topic_option_value[]"},domProps:{value:e.value},on:{input:function(n){n.target.composing||t.$set(e,"value",n.target.value)}}})])]),t._v(" "),n("td",{staticClass:"text-center"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.default,expression:"topic_option.default"}],attrs:{type:"radio",name:"option_default",value:"1",required:""},domProps:{checked:t._q(e.default,"1")},on:{change:function(n){t.$set(e,"default","1")}}})]),t._v(" "),n("td",{staticClass:"text-right",staticStyle:{"margin-top":"-2px"}},[n("button",{staticClass:"btn-danger tooltip tooltip-end",staticStyle:{margin:"0px 2px"},attrs:{title:"Remover opção de resposta",disabled:t.new_topic_options.length<=2,type:"button"},on:{click:function(e){t.removeNewTopicOption(r)}}},[n("span",{staticClass:"material-icons"},[t._v("delete")]),t._v(" "),n("span",{staticClass:"d-none d-md-inline"},[t._v("Remover")])])])])}))]),t._v(" "),n("div",{staticClass:"text-center"},[n("button",{staticClass:"btn-primary tooltip",attrs:{title:"Criar uma nova opção de resposta para este tópico",type:"button"},on:{click:t.newTopicOption}},[n("span",{staticClass:"material-icons"},[t._v("add")]),t._v("Criar nova opção\n            ")])]),n("br"),n("br"),n("a",{staticClass:"btn-danger",attrs:{href:"#"}},[n("div",{staticClass:"material-icons"},[t._v("close")]),t._v("  Cancelar")]),t._v(" "),n("button",{staticClass:"btn-success pull-right",attrs:{type:"submit"}},[n("span",{staticClass:"material-icons"},[t._v("check")]),t._v("  Salvar\n          ")]),n("br")])])])]),t._v(" "),n("modal",{ref:"modalEdit",attrs:{anchor:"modal-edit",title:"Editar tópico"},on:{close:function(e){t.setCurrentTopic(void 0)}}},[n("div",{staticClass:"row justify-content-center"},[n("div",{staticClass:"col-sm-11"},[n("form",{attrs:{action:"#","data-success":"Tópico editado com sucesso","data-error":"Não foi possível editar o tópico"},on:{submit:function(e){return e.preventDefault(),t.topicUpdate(e)}}},[n("br"),t._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col-8"},[n("div",{staticClass:"input"},[n("input",{attrs:{required:"",placeholder:"Ex.: Tarefas de casa",name:"name",minlength:"3"},domProps:{value:t.currentTopic.name}}),t._v(" "),n("label",[t._v("Nome")])])]),t._v(" "),n("div",{staticClass:"col-4"},[n("br"),t._v(" "),n("label",[n("input",{attrs:{type:"checkbox",name:"active",value:"1"},domProps:{checked:parseInt(t.currentTopic.active)}}),t._v(" Visível\n              ")])])]),t._v(" "),n("br"),n("br"),t._v(" "),n("a",{staticClass:"btn-danger",attrs:{href:"#"}},[n("div",{staticClass:"material-icons"},[t._v("close")]),t._v("\n            Cancelar\n          ")]),t._v(" "),n("button",{staticClass:"btn-success pull-right",attrs:{type:"submit"}},[n("span",{staticClass:"material-icons"},[t._v("check")]),t._v("\n            Salvar\n          ")]),t._v(" "),n("br")])])])]),t._v(" "),n("modal",{ref:"modalTopicOptions",attrs:{anchor:"modal-topic_options",title:"Editar opções de resposta"},on:{close:function(e){t.setCurrentTopic(void 0)}}},[n("div",{staticClass:"row justify-content-center"},[n("div",{staticClass:"col-sm-11"},[n("form",{attrs:{action:"#","data-success":"Opções editadas com sucesso","data-error":"Não foi possível editar as opções de resposta"},on:{submit:function(e){return e.preventDefault(),t.topicOptionsUpdate(e)}}},[n("br"),t._v(" "),n("table",{staticClass:"table"},[n("thead",[n("tr",[n("th",[t._v("Nome")]),t._v(" "),n("th",[t._v("Valor (0-100)")]),t._v(" "),n("th")])]),t._v(" "),n("tbody",t._l(t.editing_topic_options,function(e,r){return n("tr",{key:r},[n("td",[n("div",{staticClass:"input"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"topic_option.name"}],staticStyle:{margin:"0"},attrs:{required:"",placeholder:"Ex.: Excelente",name:"topic_option_name[]",minlength:"3"},domProps:{value:e.name},on:{input:function(n){n.target.composing||t.$set(e,"name",n.target.value)}}})])]),t._v(" "),n("td",[n("div",{staticClass:"input"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"topic_option.value"}],staticStyle:{margin:"0"},attrs:{required:"",type:"number",min:"0",max:"100",placeholder:"0 - 100",name:"topic_option_value[]"},domProps:{value:e.value},on:{input:function(n){n.target.composing||t.$set(e,"value",n.target.value)}}})])]),t._v(" "),n("td",{staticClass:"text-right"},[e.id?[t.currentTopic.topic_option_id===e.id?n("button",{staticClass:"btn btn-success disabled tooltip tooltip-end",attrs:{type:"button",title:"Esta já é a opção padrão"}},[n("span",{staticClass:"material-icons"},[t._v("check")])]):n("button",{staticClass:"btn btn-warning tooltip tooltip-end",attrs:{type:"button",title:"Tornar esta a opção padrão"},on:{click:function(n){t.updateDefaultOption(e.id)}}},[n("span",{staticClass:"material-icons"},[t._v("close")])])]:n("button",{staticClass:"btn-danger tooltip tooltip-end",staticStyle:{margin:"0 2px"},attrs:{title:"Remover opção de resposta",type:"button"},on:{click:function(e){t.removeEditingTopicOption(r)}}},[n("span",{staticClass:"material-icons"},[t._v("delete")]),t._v(" "),n("span",{staticClass:"d-none d-md-inline"},[t._v("Remover")])])],2)])}))]),t._v(" "),n("div",{staticClass:"text-center"},[n("button",{staticClass:"btn-primary tooltip",attrs:{type:"button",title:"Criar uma nova opção de resposta para este tópico"},on:{click:t.newTopicOption}},[n("span",{staticClass:"material-icons"},[t._v("add")]),t._v("Criar nova opção\n            ")])]),t._v(" "),n("br"),n("br"),t._v(" "),n("a",{staticClass:"btn-danger",attrs:{href:"#"}},[n("span",{staticClass:"material-icons"},[t._v("close")]),t._v("\n            Cancelar\n          ")]),t._v(" "),n("button",{staticClass:"btn-success pull-right",attrs:{type:"submit"}},[n("span",{staticClass:"material-icons"},[t._v("check")]),t._v("\n            Salvar\n          ")]),t._v(" "),n("br")])])])])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"row"},[e("div",{staticClass:"col-auto"},[e("h1",{staticClass:"content-title"},[e("i",{staticClass:"material-icons"},[this._v("list")]),this._v("Tópicos")])]),this._v(" "),e("div",{staticClass:"col text-right"},[e("a",{staticClass:"btn-success btn-sm no-wrap",attrs:{href:"#modal-new"}},[e("div",{staticClass:"material-icons"},[this._v("add")]),this._v("\n        Criar novo tópico\n      ")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("th",[this._v("Nome")])])])}]},ue=n("VU/8")(oe,ce,!1,null,null,null).exports,de={name:"Grade",data:function(){return{current_grade_id:void 0}},computed:{orderedGrades:function(){return this.$store.getters["grades/getOrderedGrades"]},orderedActiveSubjects:function(){return this.$store.getters["subjects/getOrderedSubjects"].filter(function(t){return t.active})},currentGrade:function(){var t=this;return this.current_grade_id&&this.orderedGrades.find(function(e){return e.id===t.current_grade_id})||{}},currentGradeSubjects:function(){var t=this;return this.current_grade_id?this.$store.getters["grade_subjects/getGradeSubjects"].filter(function(e){return e.grade_id===t.current_grade_id}):[]},currentSubjects:function(){var t=this;return this.current_grade_id?this.$store.getters["subjects/getSubjects"].filter(function(e){return t.currentGradeSubjects.find(function(t){return t.subject_id===e.id})}):[]},currentStudentGrades:function(){var t=this;return this.current_grade_id?this.$store.getters["student_grades/getStudentGrades"].filter(function(e){return e.grade_id===t.current_grade_id}):[]},currentStudents:function(){var t=this;return this.current_grade_id?this.$store.getters["students/getStudents"].filter(function(e){return t.studentGrade(e.id)}).sort(function(e,n){return Rt()(t.studentGrade(e.id).number-t.studentGrade(n.id).number)}):[]}},methods:{studentGrade:function(t){return this.currentStudentGrades.find(function(e){return e.student_id===t})},setCurrentGrade:function(t){this.current_grade_id=t},currentGradeHasSubject:function(t){return!!this.currentGradeSubjects.find(function(e){return e.subject_id===t})},gradeSave:function(t){var e=this;this.$emit("loading");var n=t.target,r=n.querySelectorAll('[name="grade_subject[]"]:checked'),i=[].map.call(r,function(t){return t.value}),s={name:n.querySelector("[name=name]").value,level:n.querySelector("[name=level]").value,active:!0};return this.$store.dispatch("grades/create",s).then(function(t){var n=[];return i.forEach(function(r){var i={subject_id:r,grade_id:t.id},s=e.$store.dispatch("grade_subjects/create",i);n.push(s)}),o.a.all(n)}).then(function(){e.$emit("notify","Sucesso!","Turma criada com sucesso!","success"),n.querySelector("[name=name]").value="",n.querySelector("[name=level]").value="",r.forEach(function(t){t.checked=!1}),e.$refs.modalNew.close()}).catch(function(t){e.$emit("notify","Erro!","Não foi possível criar a turma.","danger"),console.log("Error:",t)}).finally(function(){e.$emit("loaded")})},gradeUpdate:function(t){var e=this;this.$emit("loading");var n=t.target,r={id:this.current_grade_id,name:n.querySelector("[name=name]").value,level:n.querySelector("[name=level]").value,active:n.querySelector("[name=active]").checked};return this.$store.dispatch("grades/update",r).then(function(){e.$emit("notify","Sucesso!","Turma editada com sucesso!","success"),e.$refs.modalEdit.close()}).catch(function(t){e.$emit("notify","Erro!","Não foi possível editar a turma.","danger"),console.log("Error:",t)}).finally(function(){e.$emit("loaded")})},studentSave:function(t){var e=this;this.$emit("loading");var n=t.target,r={name:n.querySelector("[name=name]").value,active:!0};return this.$store.dispatch("students/create",r).then(function(t){var r={grade_id:e.current_grade_id,number:n.querySelector("[name=number]").value,start_date:"2018-01-01",end_date:"2018-12-31",student_id:t.id};return e.$store.dispatch("student_grades/create",r)}).then(function(){e.$emit("notify","Sucesso!","Estudante cadastrado com sucesso!","success"),n.querySelector("[name=number]").value="",n.querySelector("[name=name]").value="",n.querySelector("[name=name]").focus()}).catch(function(t){e.$emit("notify","Erro!","Não foi possível cadastrar o estudante.","danger"),console.log("Error:",t)}).finally(function(){e.$emit("loaded")})},studentToggle:function(t){var e=this;this.$emit("loading");var n=this.studentGrade(t);return n.end_date=new Date(n.end_date)<=new Date?"2018-12-31":(new Date).toISOString().slice(0,10),this.$store.dispatch("student_grades/update",n).then(function(t){var n=void 0;n="2018-12-31"===t.end_date?"Estudante desativado com sucesso":"Estudante ativado com sucesso",e.$emit("notify","Sucesso!",n,"success")}).catch(function(t){var r=void 0;r="2018-12-31"===n.end_date?"Não foi possível desativar o estudante":"Não foi possível ativar o estudante",e.$emit("notify","Erro!",r,"danger"),console.log("Error:",t)}).finally(function(){e.$emit("loaded")})},gradeSubjectSave:function(t){var e=this;this.$emit("loading");var n=t.target,r={grade_id:this.current_grade_id,subject_id:n.querySelector("[name=subject_id]").value};this.$store.dispatch("grade_subjects/create",r).then(function(){e.$emit("notify","Sucesso!","Disciplina cadastrada com sucesso!","success"),n.querySelector("[name=subject_id]").value=""}).catch(function(t){e.$emit("notify","Erro!","Não foi possível cadastrar a disciplina.","danger"),console.log("Error:",t)}).finally(function(){e.$emit("loaded")})},studentUpdate:function(t){var e=this,n=document.querySelector('[data-student_id="'+t+'"]');this.$emit("loading");var r=[],i={id:t,name:n.querySelector("[name=name]").value};r.push(this.$store.dispatch("students/update",i));var s={id:this.studentGrade(t).id,student_id:t,grade_id:this.current_grade_id,number:n.querySelector("[name=number]").value};r.push(this.$store.dispatch("student_grades/update",s)),o.a.all(r).then(function(){e.$emit("notify","Sucesso!","Aluno editado com sucesso!","success")}).catch(function(t){e.$emit("notify","Erro!","Não foi possível editar o aluno!","error"),console.log("Error:",t)}).finally(function(){e.$emit("loaded")})},load:function(){var t=this,e=["grade","student_grades","students","grade_subjects","subjects"].map(function(e){return t.$store.dispatch(e+"/loadFromDb")});return o.a.all(e)}},beforeCreate:function(){this.$emit("loading")},created:function(){var t=this;this.current_grade_id=void 0,this.load().then(function(){t.$emit("loaded")})}},le={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._m(0),t._v(" "),n("article",{staticClass:"box"},[n("div",{staticClass:"box-body"},[t.orderedGrades.length?n("table",{staticClass:"table"},[t._m(1),t._v(" "),n("tbody",t._l(t.orderedGrades,function(e){return n("tr",{key:e.id},[n("td",{class:parseInt(e.active)?"":"text-muted"},[t._v("\n              "+t._s(e.name)+"\n              "),parseInt(e.active)?t._e():n("span",{staticClass:"text-muted"},[t._v("(invisível)")])]),t._v(" "),n("td",{staticClass:"text-right no-wrap"},[n("a",{staticClass:"btn-warning btn-sm tooltip tooltip-end",attrs:{href:"#modal-edit",title:"Editar informações da turma"},on:{click:function(n){t.setCurrentGrade(e.id)}}},[n("div",{staticClass:"material-icons"},[t._v("edit")]),t._v(" "),n("span",{staticClass:"d-none d-md-inline"},[t._v("Editar")])]),t._v(" "),n("a",{staticClass:"btn-primary btn-sm tooltip tooltip-end",attrs:{href:"#modal-students",title:"Estudantes"},on:{click:function(n){t.setCurrentGrade(e.id)}}},[n("div",{staticClass:"material-icons"},[t._v("person")]),t._v(" "),n("span",{staticClass:"d-none d-md-inline"},[t._v("Estudantes")])]),t._v(" "),n("a",{staticClass:"btn-primary btn-sm tooltip tooltip-end",attrs:{href:"#modal-subjects",title:"Disciplinas"},on:{click:function(n){t.setCurrentGrade(e.id)}}},[n("div",{staticClass:"material-icons"},[t._v("book")]),t._v(" "),n("span",{staticClass:"d-none d-md-inline"},[t._v("Disciplinas")])])])])}))]):n("div",{staticClass:"text-center text-muted"},[n("br"),t._v(" "),n("div",{staticClass:"h4"},[t._v("Ainda não há nenhuma turma cadastrada")]),n("br")])])]),t._v(" "),n("modal",{ref:"modalNew",attrs:{anchor:"modal-new",title:"Nova turma"}},[n("div",{staticClass:"row justify-content-center"},[n("div",{staticClass:"col-sm-11"},[n("form",{attrs:{action:"#","data-resource":"grade","data-success":"Turma cadastrada com sucesso","data-error":"Não foi possível cadastrar a turma"},on:{submit:function(e){return e.preventDefault(),t.gradeSave(e)}}},[n("input",{attrs:{type:"hidden",name:"active",value:"1"}}),n("br"),t._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col-sm-8 input"},[n("input",{attrs:{required:"",placeholder:"Ex.: 1° Ano A",name:"name",minlength:"3"}}),t._v(" "),n("label",[t._v("Nome")])]),t._v(" "),n("div",{staticClass:"col-sm-4 input"},[n("input",{attrs:{type:"number",required:"",min:"1",placeholder:"Ex. 1° ano: 1",name:"level",step:"1"}}),t._v(" "),n("label",[t._v("\n                Nível\n\n                "),n("span",{staticClass:"material-icons tooltip tooltip-left tooltip-start",attrs:{"data-tooltip":"1° ano: nível 1;&#xa;2° ano: nível 2;&#xa;3° ano: nível 3;&#xa;etc"}},[t._v("info")])])])]),n("br"),t._v(" "),n("div",{staticClass:"row"},t._l(t.orderedActiveSubjects,function(e){return n("div",{key:e.id,staticClass:"col-6 col-md-4"},[n("label",[n("input",{attrs:{type:"checkbox",name:"grade_subject[]"},domProps:{value:e.id}}),t._v(" "+t._s(e.name)+"\n              ")])])})),n("br"),n("a",{staticClass:"btn-danger",attrs:{href:"#"}},[n("div",{staticClass:"material-icons"},[t._v("close")]),t._v("  Cancelar")]),t._v(" "),n("button",{staticClass:"btn-success pull-right",attrs:{type:"submit"}},[n("span",{staticClass:"material-icons"},[t._v("check")]),t._v("  Salvar\n          ")]),n("br")])])])]),t._v(" "),n("modal",{ref:"modalEdit",attrs:{anchor:"modal-edit",title:"Editar turma"},on:{close:function(e){t.setCurrentGrade(void 0)}}},[n("div",{staticClass:"row justify-content-center"},[n("div",{staticClass:"col-sm-11"},[n("form",{attrs:{action:"#","data-success":"Turma editada com sucesso","data-error":"Não foi possível editar a turma"},on:{submit:function(e){return e.preventDefault(),t.gradeUpdate(e)}}},[n("br"),t._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col-sm-8 input"},[n("input",{attrs:{required:"",placeholder:"Ex.: 1° Ano A",name:"name",minlength:"3"},domProps:{value:t.currentGrade.name}}),t._v(" "),n("label",[t._v("Nome")])]),t._v(" "),n("div",{staticClass:"col-sm-4 input"},[n("input",{attrs:{type:"number",required:"",min:"1",placeholder:"Ex.: 1",name:"level",step:"1"},domProps:{value:t.currentGrade.level}}),t._v(" "),n("label",[t._v("\n                Nível\n                "),n("span",{staticClass:"material-icons tooltip tooltip-left tooltip-start",attrs:{"data-tooltip":"1° ano: nível 1;&#xa;2° ano: nível 2;&#xa;3° ano: nível 3;&#xa;etc"}},[t._v("info")])])])]),t._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col-12 text-center"},[n("label",[n("br"),t._v(" "),n("input",{attrs:{name:"active",value:"1",type:"checkbox"},domProps:{checked:parseInt(t.currentGrade.active)}}),t._v("Visível\n              ")])])]),n("br"),n("a",{staticClass:"btn-danger",attrs:{href:"#"}},[n("div",{staticClass:"material-icons"},[t._v("close")]),t._v("  Cancelar")]),t._v(" "),n("button",{staticClass:"btn-success pull-right",attrs:{type:"submit"}},[n("span",{staticClass:"material-icons"},[t._v("check")]),t._v("  Salvar\n          ")]),n("br")])])])]),t._v(" "),n("modal",{ref:"modalStudents",attrs:{anchor:"modal-students",title:"Estudantes - "+(t.currentGrade?t.currentGrade.name:"")},on:{close:function(e){t.setCurrentGrade(void 0)}}},[n("div",{staticClass:"row justify-content-center"},[n("div",{staticClass:"col-sm-11"},[n("form",{attrs:{action:"#","data-resource":"grade","data-success":"Estudante cadastrado com sucesso","data-error":"Não foi possível cadastrar o estudante"},on:{submit:function(e){return e.preventDefault(),t.studentSave(e)}}},[n("br"),t._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col-sm-8 input"},[n("input",{attrs:{required:"",placeholder:"Ex.: João da Silva",name:"name",minlength:"3"}}),t._v(" "),n("label",[t._v("Nome")])]),t._v(" "),n("div",{staticClass:"col-sm-4 input"},[n("input",{attrs:{type:"number",required:"",min:"1",placeholder:"Ex.: 5",name:"number",step:"1"}}),t._v(" "),n("label",[t._v("Número")])])]),t._v(" "),n("button",{staticClass:"btn-success pull-right",attrs:{type:"submit"}},[n("span",{staticClass:"material-icons"},[t._v("check")]),t._v("  Salvar\n          ")])]),n("br"),t._v(" "),t.currentStudents.length?n("table",{staticClass:"table"},[n("thead",[n("tr",[n("th",[t._v("Nome")]),t._v(" "),n("th",[t._v("Número")])])]),t._v(" "),n("tbody",t._l(t.currentStudents,function(e){return n("tr",{key:e.id,attrs:{"data-student_id":e.id}},[t.studentGrade(e.id).end_date<=(new Date).toISOString().slice(0,10)?[n("td",{staticClass:"text-striked"},[t._v(t._s(e.name))]),t._v(" "),n("td",{staticStyle:{"max-width":"75px"}},[t._v(t._s(t.studentGrade(e.id).number))]),t._v(" "),n("td",{staticClass:"text-right"},[n("button",{staticClass:"btn-primary btn-sm tooltip tooltip-end",attrs:{title:"Ativar e Desativar"},on:{click:function(n){t.studentToggle(e.id)}}},[n("span",{staticClass:"material-icons"},[t._v("visibility_off")]),n("span",{staticClass:"d-none d-md-inline"},[t._v(" Ativar e Desativar")])])])]:[n("td",[n("input",{attrs:{name:"name",minlength:"3",required:""},domProps:{value:e.name}})]),t._v(" "),n("td",{staticStyle:{"max-width":"75px"}},[n("input",{attrs:{type:"number",min:"1",step:"1",name:"number",required:""},domProps:{value:t.studentGrade(e.id).number}})]),t._v(" "),n("td",{staticClass:"text-right no-wrap"},[n("button",{staticClass:"btn-success btn-sm tooltip tooltip-end",attrs:{title:"Salvar"},on:{click:function(n){t.studentUpdate(e.id)}}},[n("span",{staticClass:"material-icons"},[t._v("save")]),n("span",{staticClass:"d-none d-md-inline"},[t._v(" Salvar")])]),t._v(" "),n("button",{staticClass:"btn-primary btn-sm tooltip tooltip-end",attrs:{title:"Ativar e Desativar"},on:{click:function(n){t.studentToggle(e.id)}}},[n("span",{staticClass:"material-icons"},[t._v("visibility_off")]),n("span",{staticClass:"d-none d-md-inline"},[t._v(" Ativar e Desativar")])])])]],2)}))]):n("div",{staticClass:"text-center text-muted"},[n("br"),n("br"),n("br"),t._v(" "),n("div",{staticClass:"h4"},[t._v("Ainda não há nenhum estudante cadastrado")]),t._v(" "),n("br"),n("br")]),t._v(" "),n("br"),n("a",{staticClass:"btn-danger",attrs:{href:"#"}},[n("div",{staticClass:"material-icons"},[t._v("close")]),t._v("  Fechar")])])])]),t._v(" "),n("modal",{ref:"modalSubjects",attrs:{anchor:"modal-subjects",title:"Disciplinas - "+(t.currentGrade?t.currentGrade.name:"")}},[n("div",{staticClass:"row justify-content-center"},[n("div",{staticClass:"col-sm-11"},[n("form",{attrs:{action:"#","data-success":"Disciplina incluída com sucesso","data-error":"Não foi possível incluir a disciplina"},on:{submit:function(e){return e.preventDefault(),t.gradeSubjectSave(e)}}},[n("br"),t._v(" "),n("div",{staticClass:"row justify-content-center"},[n("div",{staticClass:"col-12 col-sm-6 input"},[n("select",{attrs:{required:"",name:"subject_id"}},[n("option",{attrs:{value:"",disabled:"",hidden:"",selected:""}},[t._v("Selecione...")]),t._v(" "),t._l(t.orderedActiveSubjects,function(e){return n("option",{key:e.id,attrs:{disabled:t.currentGradeHasSubject(e.id)},domProps:{value:e.id}},[t._v(t._s(e.name))])})],2),t._v(" "),n("label",[t._v("Disciplina")])]),t._v(" "),n("div",{staticClass:"col-12 col-sm-3"},[n("br",{staticClass:"d-none d-sm-inline"}),t._v(" "),n("button",{staticClass:"btn-success",attrs:{type:"submit"}},[n("span",{staticClass:"material-icons"},[t._v("check")]),t._v(" Salvar\n              ")])])]),t._v(" "),n("div",{staticClass:"row"},t._l(t.currentSubjects,function(e){return n("div",{key:e.id,staticClass:"col-6 col-md-4"},[n("div",{staticClass:"material-icons"},[t._v("check")]),t._v(" "+t._s(e.name)+"\n            ")])})),n("br"),n("a",{staticClass:"btn-danger",attrs:{href:"#"}},[n("div",{staticClass:"material-icons"},[t._v("close")]),t._v("  Cancelar")]),n("br")])])])])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"row"},[e("div",{staticClass:"col-auto"},[e("h1",{staticClass:"content-title"},[e("i",{staticClass:"material-icons"},[this._v("people")]),this._v("Turma")])]),this._v(" "),e("div",{staticClass:"col text-right"},[e("a",{staticClass:"btn-success btn-sm no-wrap",attrs:{href:"#modal-new"}},[e("div",{staticClass:"material-icons"},[this._v("add")]),this._v("\n        Criar nova turma\n      ")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("th",[this._v("Nome")])])])}]},_e=n("VU/8")(de,le,!1,null,null,null).exports,ve={name:"Council",data:function(){return{current_council_id:void 0}},computed:{orderedActiveTopics:function(){return this.$store.getters["topics/getOrderedTopics"].filter(function(t){return t.active})},orderedCouncils:function(){return this.$store.getters["councils/getOrderedCouncils"]},currentCouncil:function(){var t=this;return this.current_council_id&&this.orderedCouncils.find(function(e){return e.id===t.current_council_id})||{}},currentTopics:function(){var t=this;return this.current_council_id?this.$store.getters["topics/getOrderedTopics"].filter(function(e){return t.$store.getters["council_topics/getCouncilTopics"].find(function(n){return n.topic_id===e.id&&n.council_id===t.current_council_id})}):[]}},methods:{councilStatus:function(t){var e=this.orderedCouncils.find(function(e){return e.id===t}),n=new Date;return n>new Date(e.end_date)?"Finalizado":n<new Date(e.start_date)?"Aguardando início":e.active?"Acontecendo":"Pausado"},activeCouncil:function(t){var e=this.orderedCouncils.find(function(e){return e.id===t}),n=new Date;return e.active&&n>=new Date(e.start_date)&&n<=new Date(e.end_date)},setCurrentCouncil:function(t){this.current_council_id=t},councilSave:function(t){var e=this;this.$emit("loading");var n=t.target,r=n.querySelectorAll('[name="council_topic[]"]:checked'),i=[].map.call(r,function(t){return t.value}),s={name:n.querySelector("[name=name]").value,start_date:n.querySelector("[name=start_date]").value,end_date:n.querySelector("[name=end_date]").value,active:!0};return this.$store.dispatch("councils/create",s).then(function(t){var n=[];return i.forEach(function(r){var i={topic_id:r,council_id:t.id},s=e.$store.dispatch("council_topics/create",i);n.push(s)}),e.$store.getters["grades/getGrades"].forEach(function(r){var i={grade_id:r.id,council_id:t.id},s=e.$store.dispatch("council_grades/create",i);n.push(s)}),o.a.all(n)}).then(function(){e.$emit("notify","Sucesso!","Conselho de Classe cadastrado com sucesso!","success"),e.$refs.modalNew.close(),n.querySelector("[name=name]").value="",n.querySelector("[name=start_date]").value="",n.querySelector("[name=end_date]").value="",r.forEach(function(t){t.checked=!1})}).catch(function(t){e.$emit("notify","Erro!","Não foi possível cadastrar o conselho de Classe.","danger"),console.log("Error:",t)}).finally(function(){e.$emit("loaded")})},councilUpdate:function(t){var e=this;this.$emit("loading");var n=t.target,r={id:this.current_council_id,name:n.querySelector("[name=name]").value,start_date:n.querySelector("[name=start_date]").value,end_date:n.querySelector("[name=end_date]").value,active:!0};return this.$store.dispatch("councils/update",r).then(function(){e.$emit("notify","Sucesso!","Conselho de Classe editado com sucesso!","success")}).catch(function(t){e.$emit("notify","Erro!","Não foi possível editar o Conselho de Classe.","danger"),console.log("Error:",t)}).finally(function(){e.$emit("loaded")})},load:function(){var t=this,e=["councils","council_topics","topics","council_grades"].map(function(e){return t.$store.dispatch(e+"/loadFromDb")});return o.a.all(e)}},beforeCreate:function(){this.$emit("loading")},created:function(){var t=this;this.load().then(function(){t.$emit("loaded")})}},me={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._m(0),t._v(" "),n("article",{staticClass:"box"},[n("div",{staticClass:"box-body"},[t.orderedCouncils.length?n("table",{staticClass:"table"},[t._m(1),t._v(" "),n("tbody",t._l(t.orderedCouncils,function(e){return n("tr",{key:e.id,class:t.activeCouncil(e.id)?"text-bold":""},[n("td",[t._v(t._s(e.name))]),t._v(" "),n("td",{staticClass:"d-none d-sm-table-cell"},[t._v(t._s(new Date(e.start_date).toLocaleDateString("pt-BR"))+" - "+t._s(new Date(e.end_date).toLocaleDateString("pt-BR")))]),t._v(" "),n("td",{staticClass:"d-none d-lg-table-cell"},[t._v(t._s(t.councilStatus(e.id)))]),t._v(" "),n("td",{staticClass:"text-right no-wrap"},[n("router-link",{staticClass:"btn-primary btn-sm tooltip tooltip-end",attrs:{to:{name:"Report",params:{id:e.id}},title:"Relatórios do conselho de classe"}},[n("div",{staticClass:"material-icons"},[t._v("search")]),t._v(" "),n("span",{staticClass:"d-none d-md-inline"},[t._v("Relatórios")])]),t._v(" "),n("a",{staticClass:"btn-warning btn-sm tooltip tooltip-end",attrs:{href:"#modal-edit",title:"Editar informações do conselho"},on:{click:function(n){t.setCurrentCouncil(e.id)}}},[n("div",{staticClass:"material-icons"},[t._v("edit")]),t._v(" "),n("span",{staticClass:"d-none d-md-inline"},[t._v("Editar")])])],1)])}))]):n("div",{staticClass:"text-center text-muted"},[n("br"),t._v(" "),n("div",{staticClass:"h4"},[t._v("Ainda não há nenhum conselho de classe cadastrado")]),n("br")])])]),t._v(" "),n("modal",{ref:"modalNew",attrs:{anchor:"modal-new",title:"Novo conselho de classe"}},[n("div",{staticClass:"row justify-content-center"},[n("div",{staticClass:"col-sm-11"},[n("form",{attrs:{action:"#","data-success":"Conselho de classe criado com sucesso","data-error":"Não foi possível criar o conselho de classe"},on:{submit:function(e){return e.preventDefault(),t.councilSave(e)}}},[n("br"),t._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-4 input"},[n("input",{attrs:{required:"",placeholder:"Ex.: "+(1+~~(((new Date).getMonth()+1)/4))+"° trimestre "+(new Date).getFullYear(),name:"name"}}),t._v(" "),n("label",[t._v("Nome")])]),t._v(" "),n("div",{staticClass:"col-sm-6 col-md-4 input"},[n("input",{attrs:{type:"date",required:"",name:"start_date"}}),t._v(" "),n("label",[t._v("\n                Data inicial\n\n                "),n("div",{staticClass:"material-icons tooltip",attrs:{"data-tooltip":"Primeiro dia disponível para avaliação"}},[t._v("help")])])]),t._v(" "),n("div",{staticClass:"col-sm-6 col-md-4 input"},[n("input",{attrs:{type:"date",required:"",name:"end_date"}}),t._v(" "),n("label",[t._v("\n                Data final\n\n                "),n("div",{staticClass:"material-icons tooltip",attrs:{"data-tooltip":"Último dia disponível para avaliação"}},[t._v("help")])])])]),n("br"),t._v(" "),n("div",{staticClass:"row"},t._l(t.orderedActiveTopics,function(e){return n("div",{key:e.id,staticClass:"col-6 col-md-4"},[n("label",[n("input",{attrs:{type:"checkbox",name:"council_topic[]"},domProps:{value:e.id}}),t._v(" "+t._s(e.name)+"\n              ")])])})),n("br"),n("a",{staticClass:"btn-danger",attrs:{href:"#"}},[n("div",{staticClass:"material-icons"},[t._v("close")]),t._v("  Cancelar")]),t._v(" "),n("button",{staticClass:"btn-success pull-right",attrs:{type:"submit"}},[n("div",{staticClass:"material-icons"},[t._v("check")]),t._v("  Salvar\n          ")]),n("br")])])])]),t._v(" "),n("modal",{ref:"modalEdit",attrs:{anchor:"modal-edit",title:"Editar conselho de classe"},on:{close:function(e){t.setCurrentCouncil(void 0)}}},[n("div",{staticClass:"row justify-content-center"},[n("div",{staticClass:"col-sm-11"},[n("form",{attrs:{action:"#","data-success":"Conselho de classe editado com sucesso","data-error":"Não foi possível editar o conselho de classe"},on:{submit:function(e){return e.preventDefault(),t.councilUpdate(e)}}},[n("br"),t._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-4 input"},[n("input",{attrs:{required:"",name:"name",placeholder:"Ex.: "+(1+~~(((new Date).getMonth()+1)/4))+"° trimestre "+(new Date).getFullYear()},domProps:{value:t.currentCouncil.name}}),t._v(" "),n("label",[t._v("Nome")])]),t._v(" "),n("div",{staticClass:"col-sm-6 col-md-4 input"},[n("input",{attrs:{type:"date",required:"",name:"start_date",placeholder:"Primeiro dia disponível para avaliação"},domProps:{value:t.currentCouncil.start_date}}),t._v(" "),n("label",[t._v("\n                Data inicial\n\n                "),n("div",{staticClass:"material-icons tooltip",attrs:{"data-tooltip":"Primeiro dia disponível para avaliação"}},[t._v("help")])])]),t._v(" "),n("div",{staticClass:"col-sm-6 col-md-4 input"},[n("input",{attrs:{type:"date",required:"",name:"end_date",placeholder:"Primeiro dia disponível para avaliação"},domProps:{value:t.currentCouncil.end_date}}),t._v(" "),n("label",[t._v("\n                Data final\n\n                "),n("div",{staticClass:"material-icons tooltip",attrs:{"data-tooltip":"Último dia disponível para avaliação"}},[t._v("help")])])])]),n("br"),t._v(" "),n("div",{staticClass:"row"},t._l(t.currentTopics,function(e){return n("div",{key:e.id,staticClass:"col-6 col-md-4"},[n("div",{staticClass:"material-icons"},[t._v("check")]),t._v(" "+t._s(e.name)+"\n            ")])})),t._v(" "),n("br"),t._v(" "),n("a",{staticClass:"btn-danger",attrs:{href:"#"}},[n("div",{staticClass:"material-icons"},[t._v("close")]),t._v("\n            Cancelar\n          ")]),t._v(" "),n("button",{staticClass:"btn-success pull-right",attrs:{type:"submit"}},[n("div",{staticClass:"material-icons"},[t._v("check")]),t._v("\n            Salvar\n          ")]),t._v(" "),n("br")])])])])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"row"},[e("div",{staticClass:"col-auto"},[e("h1",{staticClass:"content-title"},[e("i",{staticClass:"material-icons"},[this._v("edit")]),this._v("Conselhos de Classe")])]),this._v(" "),e("div",{staticClass:"col text-right"},[e("a",{staticClass:"btn-success btn-sm no-wrap",attrs:{href:"#modal-new"}},[e("div",{staticClass:"material-icons"},[this._v("add")]),this._v(" Criar novo conselho")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("th",[this._v("Nome")]),this._v(" "),e("th",{staticClass:"d-none d-sm-table-cell"},[this._v("Período")]),this._v(" "),e("th",{staticClass:"d-none d-lg-table-cell"},[this._v("Status")])])])}]},fe=n("VU/8")(ve,me,!1,null,null,null).exports,pe={name:"Role",data:function(){return{}},computed:{orderedUsers:function(){return this.$store.getters["users/getOrderedUsers"]},orderedRoleTypes:function(){return this.$store.getters["role_types/getOrderedRoleTypes"]}},methods:{role_type:function(t){var e=this.$store.getters["roles/getRoles"].find(function(e){return e.user_id===t&&parseInt(e.approved)});return e?this.$store.getters["role_types/getRoleTypes"].find(function(t){return t.id===e.role_type_id}):{}},user_save:function(t){var e=this,n=t.target,r={name:n.querySelector("[name=name]").value,email:n.querySelector("[name=email]").value,password:n.querySelector("[name=password]").value},i={role_type_id:n.querySelector("[name=role_type_id]").value,approved:!0};if(r.password===n.querySelector("[name=re_password]").value){this.$emit("loading");var s=m.a.defaults.headers.common.Token+"";this.$store.dispatch("users/create",r).then(function(t){return r.id=t.id,r.created_at=t.created_at,r.updated_at=t.created_at,i.user_id=r.id,m.a.post("/user_token",r)}).then(function(t){return m.a.defaults.headers.common.Token=t.data.value,e.$store.dispatch("roles/create",i)}).then(function(t){return i.id=t.id,i.created_at=t.created_at,i.updated_at=t.created_at,m.a.defaults.headers.common.Token=s,e.$store.dispatch("roles/update",i)}).then(function(){e.$emit("notify","Sucesso!","Usuário criado com sucesso!","success"),e.$refs.modalNew.close(),n.querySelector("[name=name]").value="",n.querySelector("[name=email]").value="",n.querySelector("[name=password]").value="",n.querySelector("[name=role_type_id]").value=""}).catch(function(t){e.$emit("notify","Erro!","Não foi possível criar o usuário.","danger"),console.log("Error:",t)}).finally(function(){e.$emit("loaded")})}else this.$emit("notify","Erro!","As senhas informadas devem ser iguais!","danger")},load:function(){var t=this,e=["users","role_types","roles"].map(function(e){return t.$store.dispatch(e+"/loadFromDb")});return o.a.all(e)}},beforeCreate:function(){this.$emit("loading")},created:function(){var t=this;this.load().then(function(){t.$emit("loaded")})}},he={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._m(0),t._v(" "),n("article",{staticClass:"box"},[n("div",{staticClass:"box-body"},[n("table",{staticClass:"table"},[t._m(1),t._v(" "),n("tbody",t._l(t.orderedUsers,function(e){return n("tr",{key:e.id},[n("td",[t._v(t._s(e.name))]),t._v(" "),n("td",[t._v(t._s(t.role_type(e.id).name))]),t._v(" "),n("td",[t._v(t._s(e.email))])])}))])])]),t._v(" "),n("modal",{ref:"modalNew",attrs:{anchor:"modal-new",title:"Novo usuário"}},[n("div",{staticClass:"row justify-content-center"},[n("div",{staticClass:"col-sm-11"},[n("form",{attrs:{action:"#","data-success":"Usuário cadastrado com sucesso","data-error":"Não foi possível cadastrar o usuário"},on:{submit:function(e){return e.preventDefault(),t.user_save(e)}}},[n("br"),t._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col-sm-6 input"},[n("input",{attrs:{required:"",placeholder:"Ex.: João da Silva",name:"name",minlength:"3"}}),t._v(" "),n("label",[t._v("Nome")])]),t._v(" "),n("div",{staticClass:"col-sm-6 input"},[n("input",{attrs:{required:"",placeholder:"Ex.: joao@email.com",name:"email",type:"email",minlength:"3"}}),t._v(" "),n("label",[t._v("E-mail")])])]),t._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col-sm-6 input"},[n("input",{attrs:{required:"",placeholder:"Ao menos 5 caracteres",name:"password",type:"password",minlength:"5"}}),t._v(" "),n("label",[t._v("Senha")])]),t._v(" "),n("div",{staticClass:"col-sm-6 input"},[n("input",{attrs:{required:"",placeholder:"Igual à anterior",name:"re_password",type:"password",minlength:"5"}}),t._v(" "),n("label",[t._v("Repita a senha")])])]),t._v(" "),n("div",{staticClass:"row justify-content-center"},[n("div",{staticClass:"col-sm-6 input"},[n("select",{attrs:{required:"",name:"role_type_id"}},[n("option",{attrs:{value:"",selected:"",disabled:"",hidden:""}},[t._v("Selecione...")]),t._v(" "),t._l(t.orderedRoleTypes,function(e){return n("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.name))])})],2),t._v(" "),n("label",[t._v("Tipo de usuário")])])]),n("br"),n("br"),n("a",{staticClass:"btn-danger",attrs:{href:"#"}},[n("div",{staticClass:"material-icons"},[t._v("close")]),t._v("  Cancelar")]),t._v(" "),n("button",{staticClass:"btn-success pull-right",attrs:{type:"submit"}},[n("span",{staticClass:"material-icons"},[t._v("check")]),t._v("  Salvar\n          ")]),n("br")])])])])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"row"},[e("div",{staticClass:"col-auto"},[e("h1",{staticClass:"content-title"},[e("i",{staticClass:"material-icons"},[this._v("people")]),this._v("Usuários")])]),this._v(" "),e("div",{staticClass:"col text-right"},[e("a",{staticClass:"btn-success btn-sm no-wrap",attrs:{href:"#modal-new"}},[e("div",{staticClass:"material-icons"},[this._v("add")]),this._v(" Criar novo usuário")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("th",[this._v("Nome")]),this._v(" "),e("th",[this._v("Tipo")]),this._v(" "),e("th",[this._v("E-mail")])])])}]},be=n("VU/8")(pe,he,!1,null,null,null).exports,ge={name:"Teacher",data:function(){return{current_user_id:void 0,current_grade_id:"",current_subject_id:"",current_teacher_request_id:void 0,current_teacher_id:void 0}},computed:{orderedGrades:function(){return this.$store.getters["grades/getOrderedGrades"]},teacherRequests:function(){return this.$store.getters["teacher_requests/getTeacherRequests"]},orderedUsersWhoEvaluate:function(){var t=this;return this.$store.getters["users/getOrderedUsers"].filter(function(e){return t.userHasPermission("evaluate",e.id)})},currentUser:function(){var t=this;return this.current_user_id&&this.orderedUsersWhoEvaluate.find(function(e){return e.id===t.current_user_id})||{}},currentTeachers:function(){var t=this;return this.current_user_id?this.$store.getters["teachers/getTeachers"].filter(function(e){return e.user_id===t.current_user_id}):[]},currentGradeSubjects:function(){var t=this;return this.current_grade_id?this.$store.getters["grade_subjects/getGradeSubjects"].filter(function(e){return e.grade_id===t.current_grade_id}):[]},currentSubjects:function(){var t=this;return this.current_grade_id?this.$store.getters["subjects/getOrderedSubjects"].filter(function(e){return t.currentGradeSubjects.find(function(t){return t.subject_id===e.id})}):[]},currentGradeTeachers:function(){var t=this;return this.current_grade_id?this.$store.getters["teachers/getTeachers"].filter(function(e){return e.grade_id===t.current_grade_id}):[]}},methods:{getUser:function(t){return this.$store.getters["users/getUsers"].find(function(e){return e.id===t})},getGrade:function(t){return this.$store.getters["grades/getGrades"].find(function(e){return e.id===t})},getSubject:function(t){return this.$store.getters["subjects/getSubjects"].find(function(e){return e.id===t})},setCurrentUser:function(t){this.current_user_id=t},setCurrentGrade:function(t){this.current_grade_id=t},setCurrentTeacher:function(t){this.current_teacher_id=t},setCurrentTeacherRequest:function(t){this.current_teacher_request_id=t},roleType:function(t){var e=this.$store.getters["roles/getRoles"].find(function(e){return e.user_id===t&&parseInt(e.approved)});return e?this.$store.getters["role_types/getRoleTypes"].find(function(t){return t.id===e.role_type_id}):{}},userHasPermission:function(t,e){var n=this.roleType(e);if(!n.id)return!1;var r=this.$store.getters["permissions/getPermissions"].find(function(e){return e.reference===t});return!!this.$store.getters["role_type_permissions/getRoleTypePermissions"].find(function(t){return t.permission_id===r.id&&t.role_type_id===n.id})},teacherSave:function(){var t=this;this.$emit("loading");var e={grade_id:this.current_grade_id,subject_id:this.current_subject_id,user_id:this.current_user_id,start_date:"2018-01-01",end_date:"2018-12-31"};this.$store.dispatch("teachers/create",e).then(function(){t.$emit("notify","Sucesso!","Professor vinculado à turma e à disciplina com sucesso!","success"),t.current_subject_id=""}).catch(function(e){t.$emit("notify","Erro!","Não foi possível desvincular o professor.","danger"),console.log("Error:",e)}).finally(function(){t.$emit("loaded")})},acceptTeacherRequest:function(){var t=this;this.$emit("loading");var e=this.teacherRequests.find(function(e){return e.id===t.current_teacher_request_id}),n={user_id:e.user_id,grade_id:e.grade_id,subject_id:e.subject_id,start_date:"2018-01-01",end_date:"2018-12-31"};this.$store.dispatch("teachers/create",n).then(function(){return t.$store.dispatch("teacher_requests/delete",t.current_teacher_request_id)}).then(function(){t.$emit("notify","Sucesso!","Professor aceitado com sucesso","success")}).catch(function(e){t.$emit("notify","Erro!","Não foi possível aceitar o professor","danger"),console.log("Error:",e)}).finally(function(){t.$emit("loaded")})},denyTeacherRequest:function(){var t=this;this.$emit("loading"),this.$store.dispatch("teacher_requests/delete",this.current_teacher_request_id).then(function(){t.$emit("notify","Sucesso!","Professor negado com sucesso","success")}).catch(function(e){t.$emit("notify","Erro!","Não foi possível negar o professor","danger"),console.log("Error:",e)}).finally(function(){t.$emit("loaded")})},removeTeacher:function(){var t=this;this.$emit("loading"),this.$store.dispatch("teachers/delete",this.current_teacher_id).then(function(){t.$emit("notify","Sucesso!","Professor removido com sucesso","success")}).catch(function(e){t.$emit("notify","Erro!","Não foi possível remover o professor","danger"),console.log("Error:",e)}).finally(function(){t.$emit("loaded"),t.$refs.modalGrades.open()})},load:function(){var t=this,e=["grades","teacher_requests","users","teachers","grade_subjects","subjects","roles","role_types","permissions","role_type_permissions"].map(function(e){return t.$store.dispatch(e+"/loadFromDb")});return o.a.all(e)}},beforeCreate:function(){this.$emit("loading")},created:function(){var t=this;this.current_user_id=void 0,this.current_grade_id="",this.current_subject_id="",this.current_teacher_id=void 0,this.current_teacher_request_id=void 0,this.load().then(function(){t.$emit("loaded")})}},Ce={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._m(0),t._v(" "),n("article",{staticClass:"box"},[n("div",{staticClass:"box-header"},[t._v("Aguardando aprovação")]),t._v(" "),n("div",{staticClass:"box-body"},[t.teacherRequests.length?n("table",{staticClass:"table"},[t._m(1),t._v(" "),n("tbody",t._l(t.teacherRequests,function(e){return n("tr",{key:e.id},[n("td",[t._v(t._s(t.getUser(e.user_id).name))]),t._v(" "),n("td",[t._v(t._s(t.getGrade(e.grade_id).name))]),t._v(" "),n("td",[t._v(t._s(t.getSubject(e.subject_id).name))]),t._v(" "),n("td",{staticClass:"text-right no-wrap"},[n("a",{staticClass:"btn-success btn-sm tooltip tooltip-end",attrs:{href:"#modal-accept",title:"Aceitar professor"},on:{click:function(n){t.setCurrentTeacherRequest(e.id)}}},[n("div",{staticClass:"material-icons"},[t._v("check")]),t._v(" "),n("span",{staticClass:"d-none d-md-inline"},[t._v("Aceitar professor")])]),t._v(" "),n("a",{staticClass:"btn-danger btn-sm tooltip tooltip-end",attrs:{href:"#modal-deny",title:"Negar professor"},on:{click:function(n){t.setCurrentTeacherRequest(e.id)}}},[n("div",{staticClass:"material-icons"},[t._v("close")]),t._v(" "),n("span",{staticClass:"d-none d-md-inline"},[t._v("Negar professor")])])])])}))]):n("div",{staticClass:"text-center text-muted"},[n("br"),t._v(" "),n("div",{staticClass:"h4"},[t._v("Nenhum professor esperando aprovação")]),n("br")])])]),t._v(" "),n("article",{staticClass:"box"},[n("div",{staticClass:"box-header"},[t._v("Todos")]),t._v(" "),n("div",{staticClass:"box-body"},[n("table",{staticClass:"table"},[t._m(2),t._v(" "),n("tbody",t._l(t.orderedUsersWhoEvaluate,function(e){return n("tr",{key:e.id},[n("td",[t._v(t._s(e.name))]),t._v(" "),n("td",{staticClass:"text-right no-wrap"},[n("a",{staticClass:"btn-primary btn-sm tooltip tooltip-end",attrs:{href:"#modal-grades",title:"Turmas"},on:{click:function(n){t.setCurrentUser(e.id)}}},[n("div",{staticClass:"material-icons"},[t._v("people")]),t._v(" "),n("span",{staticClass:"d-none d-md-inline"},[t._v("Turmas")])])])])}))])])]),t._v(" "),n("modal",{ref:"modalGrades",attrs:{anchor:"modal-grades",title:"Turmas de "+t.currentUser.name},on:{close:function(e){t.setCurrentUser(void 0)}}},[n("br"),t._v(" "),n("form",{attrs:{action:"#","data-success":"Professor salvo com sucesso!","data-error":"Não foi possível cadastrar"},on:{submit:function(e){return e.preventDefault(),t.teacherSave(e)}}},[n("div",{staticClass:"row justify-content-center"},[n("div",{staticClass:"col-12 col-md-9"},[n("div",{staticClass:"row justify-content-center"},[n("div",{staticClass:"input col-6 col-sm-4"},[n("select",{directives:[{name:"model",rawName:"v-model",value:t.current_grade_id,expression:"current_grade_id"}],attrs:{id:"current_grade_id",name:"grade_id",required:""},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.current_grade_id=e.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"",selected:"",hidden:"",disabled:""}},[t._v("Selecione...")]),t._v(" "),t._l(t.orderedGrades,function(e){return n("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.name))])})],2),t._v(" "),n("label",{attrs:{for:"current_grade_id"}},[t._v("Turma")])]),t._v(" "),n("div",{staticClass:"input col-6 col-sm-4"},[n("select",{directives:[{name:"model",rawName:"v-model",value:t.current_subject_id,expression:"current_subject_id"}],attrs:{id:"current_subject_id",name:"subject_id",required:"",disabled:!t.current_grade_id},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.current_subject_id=e.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"",selected:"",hidden:"",disabled:""}},[t._v(t._s(t.current_grade_id?"Selecione...":"Selecione a turma..."))]),t._v(" "),t._l(t.currentSubjects,function(e){return n("option",{key:e.id,attrs:{disabled:t.currentGradeTeachers.find(function(t){return t.subject_id===e.id})},domProps:{value:e.id}},[t._v("\n                  "+t._s(e.name)+" "+t._s(t.currentGradeTeachers.find(function(t){return t.subject_id===e.id})?" - "+t.getUser(t.currentGradeTeachers.find(function(t){return t.subject_id===e.id}).user_id).name:"")+"\n                ")])})],2),t._v(" "),n("label",{attrs:{for:"current_subject_id"}},[t._v("Disciplina")])]),t._v(" "),n("div",{staticClass:"col-12 col-sm-3"},[n("br",{staticClass:"d-none d-sm-inline"}),t._v(" "),n("button",{staticClass:"btn-success",attrs:{type:"submit"}},[n("span",{staticClass:"material-icons"},[t._v("check")]),t._v(" Salvar\n              ")])])])])])]),n("br"),t._v(" "),t.currentUser&&t.currentTeachers.length?n("table",{staticClass:"table"},[n("thead",[n("tr",[n("th",[t._v("Turma")]),t._v(" "),n("th",[t._v("Disciplina")])])]),t._v(" "),n("tbody",t._l(t.currentTeachers,function(e){return n("tr",{key:e.id},[n("td",[t._v(t._s(t.getGrade(e.grade_id).name))]),t._v(" "),n("td",[t._v(t._s(t.getSubject(e.subject_id).name))]),t._v(" "),n("td",{staticClass:"text-right"},[n("a",{staticClass:"btn-danger btn-sm tooltip tooltip-end",attrs:{href:"#modal-remove",title:"Remover"},on:{click:function(n){t.setCurrentTeacher(e.id)}}},[n("div",{staticClass:"material-icons"},[t._v("delete")]),t._v(" "),n("span",{staticClass:"d-none d-md-inline"},[t._v("Remover")])])])])}))]):n("div",{staticClass:"text-center text-muted"},[n("br"),t._v(" "),n("div",{staticClass:"h4"},[t._v("Nenhuma turma aprovada")]),n("br")])]),t._v(" "),n("prompt",{ref:"promptAccept",attrs:{title:"Aceitar professor",type:"success",anchor:"modal-accept",accept:"Aceitar"},on:{accept:t.acceptTeacherRequest,close:function(e){t.setCurrentTeacherRequest(void 0)}}},[n("p",[t._v("Tem certeza que deseja aceitar este professor?")])]),t._v(" "),n("prompt",{ref:"promptDeny",attrs:{title:"Negar professor",type:"danger",anchor:"modal-deny",accept:"Negar"},on:{accept:t.denyTeacherRequest,close:function(e){t.setCurrentTeacherRequest(void 0)}}},[n("p",[t._v("Tem certeza que deseja negar este professor?")])]),t._v(" "),n("prompt",{ref:"promptRemove",attrs:{title:"Remover professor",type:"danger",anchor:"modal-remove",accept:"Remover"},on:{accept:t.removeTeacher,close:function(e){t.setCurrentTeacher(void 0)}}},[n("p",[t._v("Tem certeza que deseja desvincular este professor desta turma e disciplina?")])])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("h1",{staticClass:"content-title"},[e("i",{staticClass:"material-icons"},[this._v("people")]),this._v("Professores")])},function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("th",[this._v("Nome")]),this._v(" "),e("th",[this._v("Turma")]),this._v(" "),e("th",[this._v("Disciplina")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("th",[this._v("Nome")])])])}]},ye=n("VU/8")(ge,Ce,!1,null,null,null).exports,Se={name:"User",data:function(){return{}},computed:{currentUser:function(){var t=this;return this.$store.getters["users/getUsers"].find(function(e){return e.id===t.$store.state.token.user_id})||{}}},methods:{userUpdate:function(t){var e=this,n=t.target,r={id:this.currentUser.id,name:n.querySelector("[name=name]").value,email:n.querySelector("[name=email]").value},i=n.querySelector("#password").value;if(i===n.querySelector("#re_password").value)return i&&(r.password=i),this.$emit("loading"),this.$store.dispatch("users/update",r).then(function(){e.$emit("notify","Sucesso!","Usuário editado com sucesso!","success")}).catch(function(t){e.$emit("notify","Erro!","Não foi possível editar seu usuário.","danger"),console.log("Error:",t)}).finally(function(){e.$emit("loaded")});this.$emit("notify","Erro!","Os dois campos de senha devem ser iguais.","danger")},load:function(){var t=this,e=["users"].map(function(e){return t.$store.dispatch(e+"/loadFromDb")});return o.a.all(e)}},beforeCreate:function(){this.$emit("loading")},created:function(){var t=this;this.load().then(function(){t.$emit("loaded")})}},$e={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._m(0),t._v(" "),n("div",{staticClass:"row justify-content-center"},[n("div",{staticClass:"col-md-10 col-lg-8 col-xlg-6"},[n("article",{staticClass:"box"},[n("div",{staticClass:"box-body"},[n("form",{attrs:{action:"#","data-success":"Usuário editado com sucesso","data-error":"Não foi possível editar o usuário"},on:{submit:function(e){return e.preventDefault(),t.userUpdate(e)}}},[n("div",{staticClass:"row"},[n("div",{staticClass:"input col-sm-6"},[n("input",{attrs:{id:"user_name",name:"name",minlength:"3",required:""},domProps:{value:t.currentUser.name}}),t._v(" "),n("label",{attrs:{for:"user_name"}},[t._v("Nome completo")])]),t._v(" "),n("div",{staticClass:"input col-sm-6"},[n("input",{attrs:{id:"user_email",name:"email",type:"email",minlength:"3",required:""},domProps:{value:t.currentUser.email}}),t._v(" "),n("label",{attrs:{for:"user_email"}},[t._v("E-mail")])])]),t._v(" "),t._m(1),t._v(" "),t._m(2)])])])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("h1",{staticClass:"content-title"},[e("i",{staticClass:"material-icons"},[this._v("person")]),this._v("Usuário")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"row"},[e("div",{staticClass:"input col-sm-6"},[e("input",{attrs:{id:"password",type:"password",minlength:"5",placeholder:"Apenas caso queira alterar"}}),this._v(" "),e("label",{attrs:{for:"password"}},[this._v("Nova senha")])]),this._v(" "),e("div",{staticClass:"input col-sm-6"},[e("input",{attrs:{id:"re_password",type:"password",minlength:"5",placeholder:"Para conferir se digitou corretamente"}}),this._v(" "),e("label",{attrs:{for:"re_password"}},[this._v("Repita a senha")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"text-right"},[e("button",{staticClass:"btn-success"},[e("span",{staticClass:"material-icons"},[this._v("check")]),this._v(" Salvar\n              ")])])}]},je=n("VU/8")(Se,$e,!1,null,null,null).exports,we={name:"Report",data:function(){return{current_council_id:void 0,current_grade_id:"",current_subject_id:"",current_student_id:void 0,current_grade_evaluations:[],current_grade_observations:[],current_student_observations:[],loaded_evaluations:!1,min_evaluation:0,max_evaluation:100}},watch:{current_grade_id:function(){this.eraseEvaluations()},current_subject_id:function(){this.eraseEvaluations()},min_evaluation:function(){this.eraseEvaluations()},max_evaluation:function(){this.eraseEvaluations()}},computed:{currentCouncil:function(){var t=this;return this.$store.getters["councils/getCouncils"].find(function(e){return e.id===t.current_council_id})||{}},currentCouncilGrades:function(){var t=this;return this.$store.getters["council_grades/getCouncilGrades"].filter(function(e){return e.council_id===t.current_council_id})},currentGrades:function(){var t=this;return this.$store.getters["grades/getOrderedGrades"].filter(function(e){return t.currentCouncilGrades.find(function(t){return t.grade_id===e.id})})},currentCouncilTopics:function(){var t=this;return this.$store.getters["council_topics/getCouncilTopics"].filter(function(e){return e.council_id===t.current_council_id})},currentTopics:function(){var t=this;return this.$store.getters["topics/getOrderedTopics"].filter(function(e){return t.currentCouncilTopics.find(function(t){return t.topic_id===e.id})})},currentTopicOptions:function(){var t=this;return this.$store.getters["topic_options/getOrderedTopicOptions"].filter(function(e){return t.currentTopics.find(function(t){return t.id===e.topic_id})})},currentGrade:function(){var t=this;return this.current_grade_id?this.currentGrades.find(function(e){return e.id===t.current_grade_id}):{}},currentStudentGrades:function(){var t=this;return this.current_grade_id?this.$store.getters["student_grades/getStudentGrades"].filter(function(e){return e.grade_id===t.current_grade_id}):[]},currentStudents:function(){var t=this;return this.current_grade_id?this.$store.getters["students/getStudents"].map(function(e){var n=t.studentGrade(e.id);if(n)return e.grade_id=n.grade_id,e.number=n.number,e}).filter(function(t){return t}).sort(function(t,e){return Rt()(t.number-e.number)}):[]},currentGradeSubjects:function(){var t=this;return this.current_grade_id?this.$store.getters["grade_subjects/getGradeSubjects"].filter(function(e){return e.grade_id===t.current_grade_id}):[]},currentSubjects:function(){var t=this;return this.current_grade_id?this.$store.getters["subjects/getOrderedSubjects"].filter(function(e){return t.currentGradeSubjects.find(function(t){return t.subject_id===e.id})}):[]},currentEvaluations:function(){return this.current_grade_evaluations},currentGradeObservations:function(){return this.current_grade_observations},currentStudentObservations:function(){var t=this;return this.current_student_id?this.current_student_observations.filter(function(e){return e.student_id===t.current_student_id}):this.current_student_observations},currentStudent:function(){var t=this;return this.current_student_id?this.currentStudents.find(function(e){return e.id===t.current_student_id}):{}}},methods:{mustShowStudent:function(t){return this.studentHasAnyEvaluation(t)||this.currentStudentObservations.find(function(e){return e.student_id===t})},eraseEvaluations:function(){this.loaded_evaluations=!1,this.current_grade_evaluations=[],this.current_student_observations=[],this.current_grade_observations=[]},getUser:function(t){return this.$store.getters["users/getUsers"].find(function(e){return e.id===t})},getSubject:function(t){return this.$store.getters["subjects/getSubjects"].find(function(e){return e.id===t})},generateReport:function(){var t=this;if(this.loaded_evaluations=!1,this.current_grade_evaluations=[],this.current_student_observations=[],this.current_grade_observations=[],this.current_grade_id){this.$emit("loading");var e=[],n={name:"evaluation",data:{council_id:this.current_council_id,grade_id:this.current_grade_id}},r={name:"student_observation",data:{council_id:this.current_council_id,grade_id:this.current_grade_id}},i={name:"grade_observation",data:{council_id:this.current_council_id,grade_id:this.current_grade_id}};this.current_subject_id&&(n.data.subject_id=this.current_subject_id,r.data.subject_id=this.current_subject_id,i.data.subject_id=this.current_subject_id),e.push(this.$store.dispatch("getResource",n).then(function(e){t.current_grade_evaluations=e.map(function(e){var n=t.currentTopicOptions.find(function(t){return t.id===e.topic_option_id});return e.topic_id=n.topic_id,e.value=n.value,e})})),e.push(this.$store.dispatch("getResource",r).then(function(e){t.current_student_observations=e})),e.push(this.$store.dispatch("getResource",i).then(function(e){t.current_grade_observations=e})),o.a.all(e).then(function(){t.loaded_evaluations=!0,t.$emit("loaded")})}},studentHasAnyEvaluation:function(t){var e=this;return!!this.currentTopics.find(function(n){return"-"!==e.reportStudentTopic(t,n.id)})},reportStudentTopic:function(t,e){var n=this.currentTopicOptions.filter(function(t){return t.topic_id===e}),r=this.currentEvaluations.filter(function(n){return n.student_id===t&&n.topic_id===e});if(!r.length)return"-";var i=parseInt(r.reduce(function(t,e,n,r){return t+e.value/r.length},0)),s=n.reduce(function(t,e){return Math.abs(e.value-i)<Math.abs(t.value-i)?e:t});return i>this.max_evaluation||i<this.min_evaluation?"-":i+" - "+s.name},reportSubjectTopic:function(t,e){var n=this,r=this.currentTopicOptions.filter(function(t){return t.topic_id===e}),i=this.currentEvaluations.find(function(r){return r.student_id===n.current_student_id&&r.topic_id===e&&r.subject_id===t});if(!i)return"-";var s=r.find(function(t){return t.id===i.topic_option_id});return s.value+" - "+s.name},studentGrade:function(t){return this.currentStudentGrades.find(function(e){return e.student_id===t})},studentHasEvaluation:function(t){return!!this.currentEvaluations.find(function(e){return e.student_id===t})},prevStudent:function(){var t=this,e=this.currentStudents.findIndex(function(e){return e.id===t.current_student_id}),n=this.currentStudents[e-1];n&&(this.current_student_id=n.id)},nextStudent:function(){var t=this,e=this.currentStudents.findIndex(function(e){return e.id===t.current_student_id}),n=this.currentStudents[e+1];n&&(this.current_student_id=n.id)},load:function(){var t=this,e=["councils","council_grades","grades","council_topics","topics","topic_options","grade_observations","student_observations","student_grades","students","grade_subjects","subjects","users"].map(function(e){return t.$store.dispatch(e+"/loadFromDb")});return o.a.all(e)}},beforeCreate:function(){this.$emit("loading")},created:function(){var t=this;this.current_council_id=parseInt(this.$route.params.id),this.current_grade_id="",this.current_subject_id="",this.current_student_id=void 0,this.loaded_evaluations=!1,this.min_evaluation=0,this.max_evaluation=100,this.load().then(function(){t.$emit("loaded")})}},xe={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h1",{staticClass:"content-title"},[n("i",{staticClass:"material-icons"},[t._v("edit")]),t._v("Relatórios - "+t._s(t.currentCouncil.name))]),t._v(" "),n("article",{staticClass:"box"},[n("div",{staticClass:"box-body"},[n("br"),t._v(" "),n("div",{staticClass:"row justify-content-center"},[n("div",{staticClass:"col-12 col-md-10 col-xlg-9"},[n("div",{staticClass:"row justify-content-center"},[n("div",{staticClass:"input col-12 col-sm-6 col-lg-3"},[n("select",{directives:[{name:"model",rawName:"v-model",value:t.current_grade_id,expression:"current_grade_id"}],attrs:{id:"current_grade_id",name:"current_grade_id",required:""},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.current_grade_id=e.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"",selected:"",hidden:"",disabled:""}},[t._v("Selecione...")]),t._v(" "),t._l(t.currentGrades,function(e){return n("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.name))])})],2),t._v(" "),n("label",{attrs:{for:"current_grade_id"}},[t._v("Turma")])]),t._v(" "),n("div",{staticClass:"input col-12 col-sm-6 col-lg-3"},[n("select",{directives:[{name:"model",rawName:"v-model",value:t.current_subject_id,expression:"current_subject_id"}],attrs:{id:"current_subject_id",name:"current_subject_id",disabled:!t.current_grade_id},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.current_subject_id=e.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"",selected:""}},[t._v(t._s(t.current_grade_id?"Todas":"Selecione a turma..."))]),t._v(" "),t._l(t.currentSubjects,function(e){return n("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.name))])})],2),t._v(" "),n("label",{attrs:{for:"current_subject_id"}},[t._v("Disciplina")])]),t._v(" "),n("div",{staticClass:"input col-6 col-lg-3"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.min_evaluation,expression:"min_evaluation"}],attrs:{id:"min_evaluation",type:"number",min:"0",max:"100",step:"1"},domProps:{value:t.min_evaluation},on:{input:function(e){e.target.composing||(t.min_evaluation=e.target.value)}}}),t._v(" "),n("label",{attrs:{for:"min_evaluation"}},[t._v("Avaliação Mínima")])]),t._v(" "),n("div",{staticClass:"input col-6 col-lg-3"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.max_evaluation,expression:"max_evaluation"}],attrs:{id:"max_evaluation",type:"number",min:"0",max:"100",step:"1"},domProps:{value:t.max_evaluation},on:{input:function(e){e.target.composing||(t.max_evaluation=e.target.value)}}}),t._v(" "),n("label",{attrs:{for:"max_evaluation"}},[t._v("Avaliação Máxima")])])]),t._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col-12 text-right"},[n("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:t.generateReport}},[n("i",{staticClass:"fa fa-fw fa-check"}),t._v(" Gerar relatório\n              ")])])])])]),n("br"),t._v(" "),t.current_grade_id?t.loaded_evaluations?t.currentEvaluations.length?n("div",[t.current_student_id?[n("p",[n("button",{staticClass:"btn-sm btn-primary",on:{click:function(e){t.current_student_id=void 0}}},[n("span",{staticClass:"material-icons"},[t._v("arrow_back")]),t._v("\n              Voltar para a turma\n            ")]),t._v(" "),n("span",{staticClass:"pull-right"},[n("button",{staticClass:"btn-sm btn-success",on:{click:t.prevStudent}},[n("span",{staticClass:"material-icons"},[t._v("chevron_left")]),t._v("\n                Estudante anterior\n              ")]),t._v(" "),n("button",{staticClass:"btn-sm btn-success",on:{click:t.nextStudent}},[t._v("\n                Próximo estudante\n                "),n("span",{staticClass:"material-icons"},[t._v("chevron_right")])])])]),t._v(" "),n("br"),t._v(" "),n("p",[n("b",[t._v(t._s(t.currentStudent.id?t.studentGrade(t.currentStudent.id).number:"")+" - "+t._s(t.currentStudent.name))])]),t._v(" "),n("super-table",[n("thead",[n("tr",[n("th",{staticStyle:{"max-width":"33vw"}},[t._v("Matéria")]),t._v(" "),t._l(t.currentTopics,function(e){return n("th",{key:e.id,staticStyle:{"min-width":"150px"}},[t._v(t._s(e.name))])})],2)]),t._v(" "),n("tbody",t._l(t.currentSubjects,function(e){return n("tr",{key:e.id},[n("td",[t._v(t._s(e.name))]),t._v(" "),t._l(t.currentTopics,function(r){return n("td",{key:r.id,staticStyle:{"min-width":"150px"}},[t._v(t._s(t.reportSubjectTopic(e.id,r.id)))])})],2)}))]),t._v(" "),t._l(t.currentStudentObservations.filter(function(e){return e.student_id===t.current_student_id}),function(e){return n("p",{key:e.id},[n("b",[t._v(t._s(t.getUser(e.user_id).name)+t._s(t.current_subject_id?"":" - "+t.getSubject(e.subject_id).name)+":")]),t._v(" "+t._s(e.description))])})]:[n("super-table",[n("thead",[n("tr",[n("th",{staticStyle:{"max-width":"33vw"}},[t._v("Aluno")]),t._v(" "),t._l(t.currentTopics,function(e){return n("th",{key:e.id,staticStyle:{"min-width":"150px"}},[t._v(t._s(e.name))])}),t._v(" "),n("th",{staticClass:"no-wrap"},[t._v("Observações Gerais")])],2)]),t._v(" "),n("tbody",t._l(t.currentStudents,function(e){return t.mustShowStudent(e.id)?n("tr",{key:e.id,attrs:{"data-student_id":e.id}},[n("td",{staticStyle:{"max-width":"33vw"}},[n("a",{attrs:{href:"#"},on:{click:function(n){n.preventDefault(),t.current_student_id=e.id}}},[t._v(t._s(t.studentGrade(e.id).number)+" - "+t._s(e.name))])]),t._v(" "),t._l(t.currentTopics,function(r){return n("td",{key:r.id},[t._v(t._s(t.reportStudentTopic(e.id,r.id)))])}),t._v(" "),n("td",t._l(t.currentStudentObservations.filter(function(t){return t.student_id===e.id}),function(e){return n("p",{key:e.id,staticStyle:{"min-width":"250px"}},[n("b",[t._v(t._s(t.getUser(e.user_id).name)+t._s(t.current_subject_id?"":" - "+t.getSubject(e.subject_id).name)+":")]),t._v(" "+t._s(e.description))])}))],2):t._e()}))]),t._v(" "),n("br"),t._v(" "),t._l(t.currentGradeObservations,function(e){return n("p",{key:e.id},[n("b",[t._v(t._s(t.getUser(e.user_id).name)+t._s(t.current_subject_id?"":" - "+t.getSubject(e.subject_id).name)+":")]),t._v(" "+t._s(e.description))])})]],2):n("div",{staticClass:"text-center text-muted"},[n("br"),t._v(" "),n("div",{staticClass:"h4"},[t._v("Esta turma ainda "),n("b",[t._v("não recebeu avaliações")]),t.current_subject_id?n("span",[t._v(" nesta disciplina")]):t._e(),t._v(".")]),n("br")]):n("div",{staticClass:"text-center text-muted"},[n("br"),t._v(" "),t._m(1),t._v(" "),n("br")]):n("div",{staticClass:"text-center text-muted"},[n("br"),t._v(" "),t._m(0),t._v(" "),n("br")])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"h4"},[e("b",[this._v("Selecione uma turma")]),this._v(" para ver o relatório.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"h4"},[this._v('Clique em "'),e("b",[this._v("gerar relatório")]),this._v('".')])}]},Ee=n("VU/8")(we,xe,!1,null,null,null).exports,Ae={name:"Evaluate",data:function(){return{hide_evaluated_students:!1,current_user_id:void 0,current_council_id:void 0,current_grade_id:"",current_subject_id:""}},computed:{currentCouncil:function(){var t=this;return this.$store.getters["councils/getCouncils"].find(function(e){return e.id===t.current_council_id})||{}},currentCouncilTopics:function(){var t=this;return this.$store.getters["council_topics/getCouncilTopics"].filter(function(e){return e.council_id===t.current_council_id})},currentTopics:function(){var t=this;return this.$store.getters["topics/getOrderedTopics"].filter(function(e){return t.currentCouncilTopics.find(function(t){return t.topic_id===e.id})})},currentTopicOptions:function(){var t=this;return this.$store.getters["topic_options/getOrderedTopicOptions"].filter(function(e){return t.currentTopics.find(function(t){return t.id===e.topic_id})})},currentCouncilGrades:function(){var t=this;return this.$store.getters["council_grades/getCouncilGrades"].filter(function(e){return e.council_id===t.current_council_id})},currentTeachers:function(){var t=this;return this.$store.getters["teachers/getTeachers"].filter(function(e){return e.user_id===t.current_user_id})},currentGrades:function(){var t=this;return this.$store.getters["grades/getOrderedGrades"].filter(function(e){return t.currentTeachers.find(function(t){return t.grade_id===e.id})&&t.currentCouncilGrades.find(function(t){return t.grade_id===e.id})})},currentUserStudentGrades:function(){var t=this;return this.$store.getters["student_grades/getStudentGrades"].filter(function(e){return t.currentGrades.find(function(t){return t.id===e.grade_id})})},currentUserStudents:function(){var t=this;return this.$store.getters["students/getStudents"].filter(function(e){return t.currentUserStudentGrades.find(function(t){return t.student_id===e.id})}).map(function(e){var n=t.currentUserStudentGrades.find(function(t){return t.student_id===e.id});return e.grade_id=n.grade_id,e.number=n.number,e}).sort(function(t,e){return Rt()(t.number-e.number)})},currentGradeSubjects:function(){var t=this;return this.$store.getters["grade_subjects/getGradeSubjects"].filter(function(e){return t.currentGrades.find(function(t){return t.id===e.grade_id})})},currentUserSubjects:function(){var t=this;return this.$store.getters["subjects/getOrderedSubjects"].filter(function(e){return t.currentTeachers.find(function(t){return t.subject_id===e.id})})},currentUserEvaluations:function(){var t=this;return this.$store.getters["evaluations/getEvaluations"].filter(function(e){return e.council_id===t.current_council_id&&e.user_id===t.current_user_id}).map(function(e){var n=t.currentTopicOptions.find(function(t){return t.id===e.topic_option_id});return e.value=n.value,e.topic_id=n.topic_id,e})},currentUserStudentObservations:function(){var t=this;return this.$store.getters["student_observations/getStudentObservations"].filter(function(e){return e.council_id===t.current_council_id&&e.user_id===t.current_user_id})},currentUserGradeObservations:function(){var t=this;return this.$store.getters["grade_observations/getGradeObservations"].filter(function(e){return e.council_id===t.current_council_id&&e.user_id===t.current_user_id})},currentGrade:function(){var t=this;return this.current_grade_id?this.currentGrades.find(function(e){return e.id===t.current_grade_id}):{}},currentStudentGrades:function(){var t=this;return this.current_grade_id?this.currentUserStudentGrades.filter(function(e){return e.grade_id===t.current_grade_id}):[]},currentStudents:function(){var t=this;return this.current_grade_id?this.currentUserStudents.filter(function(e){return t.currentStudentGrades.find(function(t){return t.student_id===e.id})}):[]},currentSubjects:function(){var t=this;return this.current_grade_id?this.currentUserSubjects.filter(function(e){return t.currentTeachers.find(function(n){return n.grade_id===t.current_grade_id&&n.subject_id===e.id})}):[]},currentEvaluations:function(){var t=this;if(!this.current_grade_id||!this.current_subject_id)return[];var e=this.currentUserEvaluations.filter(function(e){return e.grade_id===t.current_grade_id&&e.subject_id===t.current_subject_id});return this.currentStudents.forEach(function(n){t.currentTopics.forEach(function(r){e.find(function(t){return t.student_id===n.id&&t.topic_id===r.id})||e.push({user_id:t.current_user_id,council_id:t.current_council_id,grade_id:t.current_grade_id,subject_id:t.current_subject_id,student_id:n.id,topic_id:r.id,topic_option_id:r.topic_option_id})})}),e},currentStudentObservations:function(){var t=this;return this.current_grade_id&&this.current_subject_id?this.currentUserStudentObservations.filter(function(e){return e.grade_id===t.current_grade_id&&e.subject_id===t.current_subject_id}):[]},currentGradeObservation:function(){var t=this;return this.current_grade_id&&this.current_subject_id?this.currentUserGradeObservations.find(function(e){return e.grade_id===t.current_grade_id&&e.subject_id===t.current_subject_id}):{}}},watch:{current_grade_id:function(){1===this.currentSubjects.length?this.current_subject_id=this.currentSubjects[0].id:this.current_subject_id=""}},methods:{setConfirmRedirect:function(){window.onbeforeunload=function(t){var e="Tem certeza que deseja sair da página? Você perderá o que não foi salvo";return t.returnValue=e,e}},unsetConfirmRedirect:function(){window.onbeforeunload=function(t){t.returnValue=void 0}},studentGrade:function(t){return this.currentStudentGrades.find(function(e){return e.student_id===t})},studentHasEvaluation:function(t){return!!this.currentEvaluations.find(function(e){return e.id&&e.student_id===t})},studentIsActive:function(t){return this.studentGrade(t).end_date>(new Date).toISOString().slice(0,10)},topicOptions:function(t){return this.currentTopicOptions.filter(function(e){return e.topic_id===t})},studentEvaluationSave:function(t){var e=this;this.$emit("loading");var n=[],r=this.currentEvaluations.filter(function(e){return e.student_id===t});n.push(this.$store.dispatch("evaluations/saveMany",r));var i=document.querySelector('tr[data-student_id="'+t+'"] textarea').value;if(i){var s=this.currentStudentObservations.find(function(e){return e.student_id===t}),a={council_id:this.current_council_id,grade_id:this.current_grade_id,subject_id:this.current_subject_id,user_id:this.current_user_id,student_id:t,description:i,id:s?s.id:null},c=a.id?"student_observations/update":"student_observations/create";n.push(this.$store.dispatch(c,a))}return o.a.all(n).then(function(){e.$emit("notify","Sucesso!","A avaliação do aluno foi salva com sucesso!","success")}).catch(function(t){e.$emit("notify","Erro!","Não foi possível salvar a avaliação do aluno.","danger"),console.log("Error:",t)}).finally(function(){e.$emit("loaded")})},evaluationSave:function(t){var e=this;this.$emit("loading");var n=t.target,r=[];n.querySelectorAll("[data-student_id]").forEach(function(t){var n=parseInt(t.dataset.student_id),i=t.querySelector("textarea");if(i){var s=i.value;if(s){var a=e.currentStudentObservations.find(function(t){return t.student_id===n}),o={council_id:e.current_council_id,grade_id:e.current_grade_id,subject_id:e.current_subject_id,user_id:e.current_user_id,student_id:n,description:s,id:a?a.id:null},c=o.id?"student_observations/update":"student_observations/create";r.push(e.$store.dispatch(c,o))}}});var i=n.querySelector("[name=grade_observation]").value;if(i){var s={council_id:this.current_council_id,grade_id:this.current_grade_id,subject_id:this.current_subject_id,user_id:this.current_user_id,description:i,id:this.currentGradeObservation?this.currentGradeObservation.id:null},a=s.id?"grade_observations/update":"grade_observations/create";r.push(this.$store.dispatch(a,s))}return r.push(this.$store.dispatch("evaluations/saveMany",this.currentEvaluations)),o.a.all(r).then(function(){e.$emit("notify","Sucesso!","Avaliação da turma salva com sucesso!","success"),e.unsetConfirmRedirect()}).catch(function(t){e.$emit("notify","Erro!","Não foi possível salvar a avaliação da turma.","danger"),console.log("Error:",t)}).finally(function(){e.$emit("loaded")})},load:function(){var t=this,e=["councils","council_topics","topics","topic_options","council_grades","teachers","grades","student_grades","students","grade_subjects","subjects","evaluations","student_observations","grade_observations"].map(function(e){return t.$store.dispatch(e+"/loadFromDb")});return o.a.all(e)}},beforeCreate:function(){this.$emit("loading")},created:function(){var t=this;this.hide_evaluated_students=!1,this.current_user_id=this.$store.state.token.user_id,this.current_council_id=parseInt(this.$route.params.id),this.current_grade_id="",this.current_subject_id="",this.load().then(function(){t.$emit("loaded")})}},Te={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h1",{staticClass:"content-title"},[n("i",{staticClass:"material-icons"},[t._v("edit")]),t._v("Avaliar - "+t._s(t.currentCouncil.name))]),t._v(" "),n("article",{staticClass:"box"},[n("div",{staticClass:"box-body"},[n("form",{attrs:{action:"#","data-success":"Avaliação salva com sucesso","data-error":"Não foi possível salvar a avaliação"},on:{submit:function(e){return e.preventDefault(),t.evaluationSave(e)}}},[n("br"),t._v(" "),n("div",{staticClass:"row justify-content-center"},[n("div",{staticClass:"col-12 col-md-8 col-lg-6"},[n("div",{staticClass:"row justify-content-center"},[n("div",{staticClass:"input col-12 col-sm-6"},[n("select",{directives:[{name:"model",rawName:"v-model",value:t.current_grade_id,expression:"current_grade_id"}],attrs:{id:"current_grade_id",name:"current_grade_id",required:""},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.current_grade_id=e.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"",selected:"",hidden:"",disabled:""}},[t._v("Selecione...")]),t._v(" "),t._l(t.currentGrades,function(e){return n("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.name))])})],2),t._v(" "),n("label",{attrs:{for:"current_grade_id"}},[t._v("Turma")])]),t._v(" "),n("div",{staticClass:"input col-12 col-sm-6"},[n("select",{directives:[{name:"model",rawName:"v-model",value:t.current_subject_id,expression:"current_subject_id"}],attrs:{id:"current_subject_id",name:"current_subject_id",required:"",disabled:!t.current_grade_id},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.current_subject_id=e.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"",hidden:"",disabled:""}},[t._v(t._s(t.current_grade_id?"Selecione...":"Selecione a turma..."))]),t._v(" "),t._l(t.currentSubjects,function(e){return n("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.name))])})],2),t._v(" "),n("label",{attrs:{for:"current_subject_id"}},[t._v("Disciplina")])])])])]),n("br"),t._v(" "),t.current_subject_id?n("div",[n("div",{staticClass:"text-center"},[n("label",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.hide_evaluated_students,expression:"hide_evaluated_students"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.hide_evaluated_students)?t._i(t.hide_evaluated_students,null)>-1:t.hide_evaluated_students},on:{change:function(e){var n=t.hide_evaluated_students,r=e.target,i=!!r.checked;if(Array.isArray(n)){var s=t._i(n,null);r.checked?s<0&&(t.hide_evaluated_students=n.concat([null])):s>-1&&(t.hide_evaluated_students=n.slice(0,s).concat(n.slice(s+1)))}else t.hide_evaluated_students=i}}}),t._v(" Mostrar apenas alunos não avaliados\n            ")])]),n("br"),t._v(" "),n("super-table",[n("thead",[n("tr",[n("th",{staticStyle:{"max-width":"33vw"}},[t._v("Aluno")]),t._v(" "),t._l(t.currentTopics,function(e){return n("th",{key:e.id},[t._v(t._s(e.name))])}),t._v(" "),n("th",[t._v("Observações Gerais")]),t._v(" "),n("th")],2)]),t._v(" "),t.currentEvaluations.length?n("tbody",t._l(t.currentStudents,function(e){return t.hide_evaluated_students&&t.studentHasEvaluation(e.id)?t._e():n("tr",{key:e.id,attrs:{"data-student_id":e.id}},[t.hide_evaluated_students||t.studentIsActive(e.id)?t.studentIsActive(e.id)?[n("td",[t._v("\n                    "+t._s(t.studentGrade(e.id).number)+" - "+t._s(e.name)+"\n                    "),t.studentHasEvaluation(e.id)?t._e():n("span",{staticClass:"text-muted"},[t._v(" (não avaliado)")])]),t._v(" "),t._l(t.currentTopics,function(r){return n("td",{key:r.id},[n("select",{directives:[{name:"model",rawName:"v-model",value:t.currentEvaluations.find(function(t){return t.student_id===e.id&&t.topic_id===r.id}).topic_option_id,expression:"currentEvaluations.find(evaluation => evaluation.student_id === student.id && evaluation.topic_id === topic.id).topic_option_id"}],attrs:{required:"","data-topic_id":r.id},on:{change:[function(n){var i=Array.prototype.filter.call(n.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.currentEvaluations.find(function(t){return t.student_id===e.id&&t.topic_id===r.id}),"topic_option_id",n.target.multiple?i:i[0])},t.setConfirmRedirect]}},t._l(t.topicOptions(r.id),function(e){return n("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.name))])}))])}),t._v(" "),n("td",[t.currentStudentObservations.find(function(t){return t.student_id===e.id})?n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.currentStudentObservations.find(function(t){return t.student_id===e.id}).description,expression:"currentStudentObservations.find(student_observation => student_observation.student_id === student.id).description"}],staticClass:"resize-v",staticStyle:{"min-width":"250px","min-height":"70px"},domProps:{value:t.currentStudentObservations.find(function(t){return t.student_id===e.id}).description},on:{input:function(n){n.target.composing||t.$set(t.currentStudentObservations.find(function(t){return t.student_id===e.id}),"description",n.target.value)}}}):n("textarea",{staticClass:"resize-v",staticStyle:{"min-width":"250px","min-height":"70px"},attrs:{placeholder:"Conteúdos não assimilados e ações efetivadas"}})]),t._v(" "),n("td",[n("a",{staticClass:"btn-success btn-sm tooltip tooltip-end",attrs:{type:"button",title:"Salvar avaliação do aluno"},on:{click:function(n){t.studentEvaluationSave(e.id)}}},[n("div",{staticClass:"material-icons"},[t._v("check")])])])]:t._e():[n("td",{staticClass:"text-striked"},[t._v(t._s(t.studentGrade(e.id).number)+" - "+t._s(e.name))]),t._v(" "),t._l(t.currentTopics,function(e){return n("td",{key:e.id},[t._v("-")])}),t._v(" "),n("td",[t._v("-")]),t._v(" "),n("td",[t._v("-")])]],2)})):t._e()]),t._v(" "),n("br"),t._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-8"},[t.currentGradeObservation?n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.currentGradeObservation.description,expression:"currentGradeObservation.description"}],staticClass:"resize-v",staticStyle:{"min-width":"300px"},attrs:{name:"grade_observation",minlength:"3",placeholder:"Observações da turma"},domProps:{value:t.currentGradeObservation.description},on:{input:function(e){e.target.composing||t.$set(t.currentGradeObservation,"description",e.target.value)}}}):n("textarea",{staticClass:"resize-v",staticStyle:{"min-width":"300px"},attrs:{name:"grade_observation",minlength:"3",placeholder:"Observações da turma"}})]),t._v(" "),t._m(0)])],1):n("div",{staticClass:"text-center text-muted"},[n("br"),t._v(" "),n("div",{staticClass:"h4"},[t._v("Selecione uma "),n("b",[t._v(t._s(t.current_grade_id?"disciplina":"turma"))]),t._v(" para avaliar.")]),n("br")])])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"col-md-4 text-right"},[e("button",{staticClass:"btn-lg btn-success",attrs:{type:"submit"}},[e("div",{staticClass:"material-icons"},[this._v("check")]),this._v(" Salvar\n              ")])])}]},qe=n("VU/8")(Ae,Te,!1,null,null,null).exports;r.a.use(Yt.a);var ke=new Yt.a({routes:[{path:"/login",name:"Login",component:te,meta:{title:"Login"}},{path:"/subject",name:"Subject",component:ae,meta:{title:"Disciplinas"}},{path:"/topic",name:"Topic",component:ue,meta:{title:"Tópicos"}},{path:"/grade",name:"Grade",component:_e,meta:{title:"Turmas"}},{path:"/teacher_request",name:"TeacherRequest",component:re,meta:{title:"Turmas"}},{path:"/council",name:"Council",component:fe,meta:{title:"Conselhos de Classe"}},{path:"/role",name:"Role",component:be,meta:{title:"Usuários"}},{path:"/teacher",name:"Teacher",component:ye,meta:{title:"Professores"}},{path:"/user",name:"User",component:je,meta:{title:"Usuário"}},{path:"/report/:id",name:"Report",component:Ee,meta:{title:"Relatórios"}},{path:"/evaluate/:id",name:"Evaluate",component:qe,meta:{title:"Avaliar"}},{path:"/",name:"Index",component:Qt}]});ke.beforeEach(function(t,e,n){var r="Conselho";t.meta.title&&(r+=" - "+t.meta.title),document.title=r,document.location.hash="",n()});var De=ke,Ge=n("LX+c"),Re=n.n(Ge),Ne=n("/Hyb"),Fe=n.n(Ne),Oe=n("6fN7"),Pe=n.n(Oe),Ue={name:"App",data:function(){return{notification:{},loading:!0}},computed:{teacherRequests:function(){return this.$store.getters["teacher_requests/getTeacherRequests"]},currentUser:function(){var t=this;return this.$store.getters["users/getUsers"].find(function(e){return e.id===t.$store.state.token.user_id})||{}},currentRole:function(){var t=this;return this.$store.getters["roles/getRoles"].find(function(e){return e.user_id===t.$store.state.token.user_id})||{}},currentRoleType:function(){var t=this;return this.$store.getters["role_types/getRoleTypes"].find(function(e){return e.id===t.currentRole.role_type_id})||{}},currentRoleTypePermissions:function(){var t=this;return this.$store.getters["role_type_permissions/getRoleTypePermissions"].filter(function(e){return e.role_type_id===t.currentRoleType.id})},currentPermissions:function(){var t=this;return this.$store.getters["permissions/getPermissions"].filter(function(e){return t.currentRoleTypePermissions.find(function(t){return t.permission_id===e.id})})},activeCouncils:function(){return this.$store.getters["councils/getOrderedCouncils"].filter(function(t){return t.active&&new Date(t.start_date)<=new Date&&new Date(t.end_date)>=new Date})}},methods:{getUser:function(t){return this.$store.getters["users/getUsers"].find(function(e){return e.id===t})},getGrade:function(t){return this.$store.getters["grades/getGrades"].find(function(e){return e.id===t})},getSubject:function(t){return this.$store.getters["subjects/getSubjects"].find(function(e){return e.id===t})},notify:function(t,e,n,r){var i=this;void 0===r&&(r=5e3),void 0===n&&(n="info");var s=void 0;"success"===n?s="check":"danger"===n?s="close":"warning"===n?s="warning":"info"!==n&&"primary"!==n||(s="info");var a=Date.now().toString();document.getElementById("no-notification").checked=!0;var o=h()(this.notification).length>0?500:0;setTimeout(function(){i.notification={style:n,icon:s,title:t,message:e,timestamp:a},document.getElementById("notification-shown").checked=!0,setTimeout(function(){i.notification.timestamp===a&&(document.getElementById("no-notification").checked=!0,setTimeout(function(){i.notification.timestamp===a&&(i.notification={})},500))},r)},o)},logout:function(){var t=this;this.loading=!0,this.$store.dispatch("logout").then(function(){t.$router.push("/login"),t.loading=!1})},userHasPermission:function(t){return!!this.currentUser&&!!this.currentPermissions.find(function(e){return e.reference===t})},sync:function(){var t=this;this.loading=!0,this.$store.dispatch("loadFromAPI").then(function(){return t.$store.dispatch("loadData")}).catch(function(e){e.status&&401===e.status?t.notify("Não foi possível atualizar","Tente sair e entrar novamente","danger"):t.notify("Não foi possível atualizar","Ocorreu um erro durante a atualização. Tente novamente","danger"),console.log(e)}).finally(function(){t.loading=!1})},load:function(){var t=this,e=["teacher_requests","users","councils","roles","role_types","role_type_permissions","permissions"].map(function(e){return t.$store.dispatch(e+"/loadFromDb",!0)});return o.a.all(e)}},created:function(){var t=this;this.$store.commit("checkAuth"),this.$store.state.logged_in||"Login"===this.$route.name?this.$store.state.logged_in?this.load().then(function(){t.loading=!1}):this.loading=!1:this.logout()}},Le={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[t._m(0),t._v(" "),n("header",{staticClass:"header"},[n("router-link",{staticClass:"header-button main-button",attrs:{to:{name:"Index"}}},[t._v("Conselho")]),t._v(" "),t.$store.state.logged_in?[t.$store.state.logged_in?n("a",{staticClass:"header-button menu-toggle material-icons",attrs:{href:"#menu"}},[t._v("menu")]):t._e(),t._v(" "),n("button",{staticClass:"header-button material-icons",attrs:{type:"button"},on:{click:t.sync}},[t._v("sync")]),t._v(" "),t.userHasPermission("role")?n("div",{staticClass:"header-pane"},[n("button",{staticClass:"header-button material-icons",attrs:{type:"button"}},[t._v("\n          notifications\n          "),t.teacherRequests.length?n("span",{staticClass:"header-button-label-red"},[t._v(t._s(t.teacherRequests.length))]):t._e()]),t._v(" "),n("div",{staticClass:"header-pane-popup"},[t._m(1),t._v(" "),n("div",{staticClass:"header-pane-body"},[t._l(t.teacherRequests,function(e,r){return n("div",{key:e.id},[r?n("hr",{staticClass:"margin-h-15"}):t._e(),t._v(" "),n("router-link",{staticClass:"no-link",attrs:{to:{name:"Teacher"}}},[n("div",{staticClass:"header-notification-title"},[n("b",[t._v(t._s(t.getUser(e.user_id).name))]),t._v(" aguarda sua aprovação")]),t._v(" "),n("div",{staticClass:"header-notification-description"},[t._v(t._s(t.getGrade(e.grade_id).name)+" - "+t._s(t.getSubject(e.subject_id).name)+"\n                  "),n("div",{staticClass:"text-muted"},[t._v(t._s(new Date(e.created_at).toLocaleDateString("pt-BR")))])])])],1)}),t._v(" "),t.$store.state.teacher_requests.length?t._e():n("div",{staticClass:"text-center text-muted"},[n("br"),n("br"),t._v(" "),n("div",{staticClass:"h5"},[t._v("Não há notificações")]),n("br"),n("br")])],2)])]):t._e(),t._v(" "),n("div",{staticClass:"header-pane"},[n("button",{staticClass:"header-button",attrs:{type:"button"}},[t._v(t._s(t.currentUser?t.currentUser.name:""))]),t._v(" "),n("div",{staticClass:"header-pane-popup"},[n("div",{staticClass:"header-pane-body text-center bg-primary text-white"},[n("br"),t._v(" "),t._m(2),t._v(" "),n("div",{staticClass:"text-20"},[t._v(t._s(t.currentUser?t.currentUser.name:""))]),n("br"),n("br")]),t._v(" "),n("div",{staticClass:"header-pane-footer"},[n("router-link",{staticClass:"btn-default btn-sm",attrs:{to:{name:"User"}}},[t._v("Usuário")]),t._v(" "),n("button",{staticClass:"btn-default btn-sm pull-right",attrs:{type:"button"},on:{click:t.logout}},[t._v("Sair")])],1)])])]:t._e()],2),t._v(" "),n("div",{staticClass:"container"},[t.$store.state.logged_in?n("nav",{staticClass:"menu",attrs:{id:"menu"}},[n("a",{staticClass:"menu-close header-button material-icons",attrs:{href:"#"+t.$route.path}},[t._v("menu")]),t._v(" "),n("router-link",{staticClass:"menu-link",attrs:{to:{name:"Index"},"active-class":"menu-active",exact:""}},[n("i",{staticClass:"material-icons"},[t._v("home")]),t._v(" Página Inicial\n      ")]),t._v(" "),t.userHasPermission("subject")?n("router-link",{staticClass:"menu-link",attrs:{to:{name:"Subject"},"active-class":"menu-active"}},[n("i",{staticClass:"material-icons"},[t._v("book")]),t._v(" Disciplinas\n      ")]):t._e(),t._v(" "),t.userHasPermission("topic")?n("router-link",{staticClass:"menu-link",attrs:{to:{name:"Topic"},"active-class":"menu-active"}},[n("i",{staticClass:"material-icons"},[t._v("list")]),t._v(" Tópicos\n      ")]):t._e(),t._v(" "),t.userHasPermission("grade")?n("router-link",{staticClass:"menu-link",attrs:{to:{name:"Grade"},"active-class":"menu-active"}},[n("i",{staticClass:"material-icons"},[t._v("people")]),t._v(" Turmas\n      ")]):t._e(),t._v(" "),t.userHasPermission("council")?n("router-link",{staticClass:"menu-link",attrs:{to:{name:"Council"},"active-class":"menu-active"}},[n("i",{staticClass:"material-icons"},[t._v("edit")]),t._v(" Conselhos de Classe\n      ")]):t._e(),t._v(" "),t.userHasPermission("role")?n("router-link",{staticClass:"menu-link",attrs:{to:{name:"Role"},"active-class":"menu-active"}},[n("i",{staticClass:"material-icons"},[t._v("supervisor_account")]),t._v(" Usuários\n      ")]):t._e(),t._v(" "),t.userHasPermission("teacher")?n("router-link",{staticClass:"menu-link",attrs:{to:{name:"Teacher"},"active-class":"menu-active"}},[n("i",{staticClass:"material-icons"},[t._v("supervisor_account")]),t._v(" Professores\n      ")]):t._e(),t._v(" "),t.userHasPermission("evaluate")?[n("router-link",{staticClass:"menu-link",attrs:{to:{name:"TeacherRequest"},"active-class":"menu-active"}},[n("i",{staticClass:"material-icons"},[t._v("people")]),t._v(" Turmas\n        ")]),t._v(" "),t._l(t.activeCouncils,function(e){return n("router-link",{key:e.id,staticClass:"menu-link",attrs:{to:{name:"Evaluate",params:{id:e.id}},"active-class":"menu-active"}},[n("i",{staticClass:"material-icons"},[t._v("edit")]),t._v(" "+t._s(e.name)+"\n        ")])})]:t._e()],2):t._e(),t._v(" "),n("main",{staticClass:"content mark-required selection-primary"},[n("router-view",{on:{notify:t.notify,loading:function(e){t.loading=!0},loaded:function(e){t.loading=!1}}})],1)]),t._v(" "),n("input",{staticClass:"notification-toggle notification-start-hidden",attrs:{type:"radio",name:"notification-toggle",checked:""}}),t._v(" "),n("input",{staticClass:"notification-toggle",attrs:{type:"radio",name:"notification-toggle",id:"no-notification"}}),t._v(" "),n("input",{staticClass:"notification-toggle",attrs:{type:"radio",name:"notification-toggle",id:"notification-shown"}}),t._v(" "),Object.keys(t.notification).length>0?n("div",{staticClass:"notification",class:"notification-"+t.notification.style},[n("label",{staticClass:"notification-dismiss material-icons",attrs:{for:"no-notification"}},[t._v("close")]),t._v(" "),void 0!==t.notification.icon?n("div",{staticClass:"notification-icon material-icons"},[t._v(t._s(t.notification.icon))]):t._e(),t._v(" "),n("div",{staticClass:"notification-title"},[t._v(t._s(t.notification.title))]),t._v(t._s(t.notification.message)+"\n  ")]):t._e(),t._v(" "),n("div",{class:t.loading?"show":"",attrs:{id:"loading"}},[n("div",{staticClass:"material-icons"},[t._v("sync")])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("form",{attrs:{id:"form-valid-support-helper"}},[e("input",{attrs:{required:""}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"header-pane-header"},[e("i",{staticClass:"material-icons"},[this._v("notifications")]),this._v("Notificações")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"text-80"},[e("i",{staticClass:"material-icons user-icon"},[this._v("account_circle")])])}]};var Ie=n("VU/8")(Ue,Le,!1,function(t){n("XC41"),n("p3OJ"),n("diqg")},"data-v-0d828060",null).exports,He={name:"Modal",props:["title","anchor"],methods:{open:function(){document.location.hash=this.anchor,this.$emit("open")},close:function(){document.location.hash=this.$route.path,this.$emit("close")},keyDown:function(t){27===t.keyCode&&this.close()}},created:function(){window.addEventListener("keydown",this.keyDown)},beforeDestroy:function(){window.removeEventListener("keydown",this.keyDown)}},ze={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"modal",attrs:{id:t.anchor}},[n("div",{staticClass:"modal-header"},[t._v(t._s(t.title))]),t._v(" "),n("div",{staticClass:"modal-body"},[t._t("default")],2)]),t._v(" "),n("a",{staticClass:"modal-close",attrs:{href:"#"+t.$route.path},on:{click:function(e){return e.preventDefault(),t.close(e)}}})])},staticRenderFns:[]},Ve=n("VU/8")(He,ze,!1,null,null,null).exports,Me={name:"Prompt",props:["title","anchor","type","accept"],methods:{open:function(){document.location.hash=this.anchor,this.$emit("open")},close:function(){document.location.hash=this.$route.path,this.$emit("close")},keyDown:function(t){27===t.keyCode&&this.close()}},created:function(){window.addEventListener("keydown",this.keyDown)},beforeDestroy:function(){window.removeEventListener("keydown",this.keyDown)}},Be={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{class:"modal modal-xs modal-"+t.type,attrs:{id:t.anchor}},[n("div",{staticClass:"modal-header"},[t._v(t._s(t.title))]),t._v(" "),n("div",{staticClass:"modal-body"},[t._t("default")],2),t._v(" "),n("div",{staticClass:"modal-footer"},[t._m(0),t._v(" "),t.accept?n("a",{staticClass:"btn-success btn-sm pull-right",attrs:{href:"#"},on:{click:function(e){t.$emit("accept")}}},[n("div",{staticClass:"material-icons"},[t._v("check")]),t._v("\n        "+t._s(t.accept)+"\n      ")]):t._e()])]),t._v(" "),n("a",{staticClass:"modal-close",attrs:{href:"#"+t.$route.path},on:{click:function(e){return e.preventDefault(),t.close(e)}}})])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("a",{staticClass:"btn-primary btn-sm",attrs:{href:"#"}},[e("div",{staticClass:"material-icons"},[this._v("close")]),this._v("\n        Cancelar\n      ")])}]},We=n("VU/8")(Me,Be,!1,null,null,null).exports,Je=void 0,Ye=void 0,Xe=void 0,Qe=void 0,Ze=void 0,Ke=void 0,tn=void 0,en=!1,nn=void 0;function rn(t){var e=Xe.getBoundingClientRect().left,n=Xe.offsetWidth,r=t.clientX;r<e+100?(Ke&&(clearInterval(Ke),Ke=void 0),!tn&&Xe.scrollLeft&&(tn=setInterval(function(){Xe.scrollBy({left:-100,behavior:"smooth"}),Xe.scrollLeft||sn()},100),Xe.style.cursor="w-resize")):e+n-r<100?(tn&&(clearInterval(tn),tn=void 0),!Ke&&Xe.scrollLeft+Xe.offsetWidth<Je.offsetWidth&&(Ke=setInterval(function(){Xe.scrollBy({left:100,behavior:"smooth"}),Xe.scrollLeft+Xe.offsetWidth===Je.offsetWidth&&sn()},100),Xe.style.cursor="e-resize")):(tn&&(clearInterval(tn),tn=void 0,Xe.style.cursor="auto"),Ke&&(clearInterval(Ke),Ke=void 0,Xe.style.cursor="auto"))}function sn(){tn&&(clearInterval(tn),tn=void 0,Xe.style.cursor="auto"),Ke&&(clearInterval(Ke),Ke=void 0,Xe.style.cursor="auto")}function an(){var t=Je.getBoundingClientRect().top;t>0?Qe.style.display="none":(Qe.style.display="table",Qe.style.marginTop=-t+"px")}function on(){if(Ze){var t=Xe.scrollLeft;t?(Ze.style.display="table",Ze.style.marginLeft=t+"px"):Ze.style.display="none"}}function cn(){Ye.querySelectorAll("th").forEach(function(t,e){var n=e+1,r=t.offsetWidth+"px";Qe.querySelector("th:nth-child("+n+")").style.minWidth=r,Qe.querySelector("th:nth-child("+n+")").style.maxWidth=r})}function un(){var t=document.querySelector("[data-fixed_column]");t&&Xe.removeChild(t),(Ze=Qe.cloneNode(!1)).style.top="10px",Ze.style.marginTop="0px",Ze.style.borderRight="1px solid darkgray",Ze.dataset.fixed_column="fixed_column",Ze.style.zIndex=10;var e=Je.querySelector("tbody");if(e){e=e.cloneNode();var n=Qe.querySelector("thead").cloneNode(),r=Qe.querySelector("tr").cloneNode(),i=Qe.querySelector("th").cloneNode(!0),s=Je.querySelector("th");Ze.style.width=s.offsetWidth+"px";var a=s.offsetHeight+"px";i.style.height=a,i.style.minHeight=a,i.style.maxHeight=a,r.appendChild(i),n.appendChild(r),Ze.appendChild(n).cloneNode(),Je.querySelectorAll("tbody>tr").forEach(function(t,n){var r=n+1,i=t.cloneNode(),s=t.querySelector("td").cloneNode(!0),a=Je.querySelector("tbody>tr:nth-child("+r+")>td").offsetHeight+"px";s.style.height=a,s.style.minHeight=a,s.style.maxHeight=a,i.appendChild(s),e.appendChild(i)}),Ze.appendChild(e),Xe.appendChild(Ze)}}function dn(){if(Je=void 0,Ye=void 0,Xe=void 0,Qe=void 0,Ze=void 0,Ke=void 0,tn=void 0,nn=void 0,Je=document.querySelector("table:not([data-fixed_table])"),Xe=document.querySelector(".table"),nn&&nn.disconnect(),Je&&Xe){var t=Xe.querySelector("table[data-fixed_table=fixed_table]");t&&Xe.removeChild(t),Ye=Je.querySelector("thead"),(Qe=document.createElement("table")).style.position="absolute",Qe.style.backgroundColor="white",Qe.style.display="none",Qe.style.top="0px",Qe.style.left="0px",Qe.style.zIndex=11,Qe.dataset.fixed_table="fixed_table",Qe.appendChild(Ye.cloneNode(!0)),cn(),un(),Je.style.position="relative",Xe.removeEventListener("mouseout",sn),Xe.removeEventListener("mousemove",rn),window.removeEventListener("scroll",an),window.removeEventListener("resize",an),Xe.removeEventListener("scroll",on),en||(Xe.addEventListener("mousemove",rn),Xe.addEventListener("mouseout",sn)),window.addEventListener("scroll",an),window.addEventListener("resize",an),Xe.addEventListener("scroll",on),Xe.appendChild(Qe);var e={attributes:!1,childList:!0,subtree:!0};(nn=new MutationObserver(function(){nn.disconnect(),cn(),un(),nn.observe(Xe,e)})).observe(Xe,e)}}window.addEventListener("touchstart",function t(){en=!0,window.removeEventListener("touchstart",t)});var ln={name:"SuperTable",created:function(){setTimeout(dn,1e3)}},_n={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"table"},[e("table",[this._t("default")],2)])},staticRenderFns:[]};var vn=n("VU/8")(ln,_n,!1,function(t){n("9GqY")},"data-v-602e73db",null).exports;Fe.a.config("https://baa34bf451b14b72bf02d99406a1ea25@sentry.io/1268814").addPlugin(Pe.a,r.a).install(),m.a.defaults.baseURL="https://conselho-api.infomec.net.br/",m.a.defaults.headers.common.Token=void 0,m.a.defaults.headers.common.Accept="application/json; charset=UTF-8",m.a.defaults.headers.common.Timezone="-03:00",m.a.defaults.headers.common["Content-Type"]="application/json; charset=UTF-8",r.a.config.productionTip=!1,r.a.use(Re.a),r.a.component("modal",Ve),r.a.component("prompt",We),r.a.component("super-table",vn),new r.a({el:"#app",router:De,store:Jt,components:{App:Ie},template:"<App/>"})},XC41:function(t,e){},diqg:function(t,e){},p3OJ:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.13756e9b2c034b52d185.js.map