extends layout.pug

block content
    .row
        .col-auto
            h1.content-title
                i.material-icons book
                | Matérias
        .col.text-right
            a.btn-success.btn-sm.no-wra(href='#modal-new')
                .material-icons add
                |  Criar nova matéria
    article.box
        .box-body
            .table
                table
                    thead
                        tr
                            th Nome
                    tbody
                        tr(v-for='subject in subjects')
                            td {{ subject.name }}
                                span.text-muted(v-if='!subject.active')  invisível
                            td.text-right.no-wrap
                                a.btn-warning.btn-sm.tooltip.tooltip-end(:href='"#modal-edit-" + subject.id' title='Editar matéria')
                                    .material-icons edit
                                    span.d-none.d-md-inline  Editar
                                a.btn-danger.btn-sm.tooltip.tooltip-end(:href='"#modal-delete-"+subject.id' title='Remover matéria')
                                    .material-icons delete
                                    span.d-none.d-md-inline  Remover
    div.modal#modal-new
        .modal-header Nova matéria
        .modal-body
            .row.justify-content-center
                .col-sm-11
                    form(action='#' data-resource='subject' data-success='Matéria cadastrada com sucesso' data-error='Não foi possível cadastrar a matéria' onsubmit='form_submit(event)')
                        input(type='hidden' name='active' value='true')
                        br
                        .input
                            input(required name='name' placeholder='Ex.: Matemática')
                            label Nome
                        br
                        a.btn-danger(href='#') #[.material-icons close]  Cancelar
                        button.btn-success.pull-right(type='submit') #[.material-icons check]  Salvar
                        br
    a.modal-close(href='#')

    div(v-for='subject in subjects')
        div.modal(:id='"modal-edit-" + subject.id')
            .modal-header Editar matéria
            .modal-body
                .row.justify-content-center
                    .col-sm-11
                        form(action='#' data-resource='subject' data-success='Matéria editada com sucesso' data-error='Não foi possível editar a matéria' onsubmit='form_submit(event)')
                            input(type='hidden' name='id' :value='subject.id')
                            br
                            .row
                                .input.col-12.col-sm-8
                                    input(required name='name' :value='subject.name' placeholder='Ex.: Matemática')
                                    label Nome
                                .col-12.col-sm-4
                                    label
                                        br
                                        input(name='active' :value='1' :checked='subject.active' type='checkbox')
                                        | Visível
                            br
                            a.btn-danger(href='#') #[.material-icons close]  Cancelar
                            button.btn-success.pull-right(type='submit') #[.material-icons check]  Salvar
                            br
        a.modal-close(href='#')

        div.modal.modal-xs.modal-danger(:id='"modal-delete-" + subject.id')
            .modal-header Remover matéria
            .modal-body
                p Tem certeza que deseja remover esta matéria?
            .modal-footer
                a.btn-primary.btn-sm(href='#') #[.material-icons close]  Cancelar
                button.btn-danger.btn-sm.pull-right(:onclick='"delete_resource(\'subject\', "+subject.id+")"') #[.material-icons delete]  Remover
        a.modal-close(href='#')